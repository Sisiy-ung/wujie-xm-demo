{"version":3,"file":"index.js","mappings":"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","sources":["webpack://WujieVue/webpack/universalModuleDefinition","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://WujieVue/external umd {\"root\":\"Vue\",\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"amd\":\"vue\"}","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/typeof.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/regenerator/index.js","webpack://WujieVue/webpack/bootstrap","webpack://WujieVue/webpack/runtime/compat get default export","webpack://WujieVue/webpack/runtime/define property getters","webpack://WujieVue/webpack/runtime/hasOwnProperty shorthand","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://WujieVue/../src/constant.ts","webpack://WujieVue/../src/utils.ts","webpack://WujieVue/../src/template.ts","webpack://WujieVue/../src/plugin.ts","webpack://WujieVue/../src/entry.ts","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/construct.js","webpack://WujieVue/../src/common.ts","webpack://WujieVue/../src/effect.ts","webpack://WujieVue/../src/shadow.ts","webpack://WujieVue/../src/sync.ts","webpack://WujieVue/../src/iframe.ts","webpack://WujieVue/../src/proxy.ts","webpack://WujieVue/../src/event.ts","webpack://WujieVue/../src/sandbox.ts","webpack://WujieVue/../src/index.ts","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://WujieVue/../../node_modules/.pnpm/@babel+runtime@7.27.0/node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://WujieVue/./index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WujieVue\", [\"vue\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WujieVue\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"WujieVue\"] = factory(root[\"Vue\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__154__) {\nreturn ","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","module.exports = __WEBPACK_EXTERNAL_MODULE__154__;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nfunction _toConsumableArray(r) {\n  return arrayWithoutHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableSpread();\n}\nexport { _toConsumableArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return arrayLikeToArray(r);\n}\nexport { _arrayWithoutHoles as default };","function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nexport { _iterableToArray as default };","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableSpread as default };","// \nexport const WUJIE_APP_ID = \"data-wujie-id\";\nexport const WUJIE_SCRIPT_ID = \"data-wujie-script-id\";\nexport const WUJIE_DATA_FLAG = \"data-wujie-Flag\";\nexport const CONTAINER_POSITION_DATA_FLAG = \"data-container-position-flag\";\nexport const CONTAINER_OVERFLOW_DATA_FLAG = \"data-container-overflow-flag\";\nexport const LOADING_DATA_FLAG = \"data-loading-flag\";\nexport const WUJIE_DATA_ATTACH_CSS_FLAG = \"data-wujie-attach-css-flag\";\n\n// \nexport const WUJIE_IFRAME_CLASS = \"wujie_iframe\";\nexport const WUJIE_ALL_EVENT = \"_wujie_all_event\";\nexport const WUJIE_SHADE_STYLE =\n  \"position: fixed; z-index: 2147483647; visibility: hidden; inset: 0px; backface-visibility: hidden;\";\nexport const WUJIE_LOADING_STYLE =\n  \"position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index:1;\";\n\nexport const WUJIE_LOADING_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\">\n<rect x=\"0\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n<rect x=\"10\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n<rect x=\"20\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n</svg>`;\n\n// \nexport const WUJIE_TIPS_NO_URL = \"url\";\nexport const WUJIE_TIPS_RELOAD_DISABLED = \"reload\";\nexport const WUJIE_TIPS_STOP_APP = \"iframe\";\nexport const WUJIE_TIPS_STOP_APP_DETAIL = WUJIE_TIPS_STOP_APP + \"https://github.com/Tencent/wujie/issues/54\";\nexport const WUJIE_TIPS_NO_SUBJECT = \"\";\nexport const WUJIE_TIPS_NO_FETCH = \"windowfetchpolyfill\";\nexport const WUJIE_TIPS_NOT_SUPPORTED = \"iframe\";\nexport const WUJIE_TIPS_SCRIPT_ERROR_REQUESTED = \"\";\nexport const WUJIE_TIPS_CSS_ERROR_REQUESTED = \"\";\nexport const WUJIE_TIPS_HTML_ERROR_REQUESTED = \"html\";\nexport const WUJIE_TIPS_REPEAT_RENDER = \"\";\nexport const WUJIE_TIPS_NO_SCRIPT = \"Script\";\nexport const WUJIE_TIPS_GET_ELEMENT_BY_ID =\n  \"document.getElementById()document.querySelector\";\n","import {\n  WUJIE_SCRIPT_ID,\n  WUJIE_TIPS_NO_URL,\n  WUJIE_APP_ID,\n  WUJIE_TIPS_STOP_APP,\n  WUJIE_TIPS_STOP_APP_DETAIL,\n} from \"./constant\";\nimport { plugin, cacheOptions } from \"./index\";\n\nexport function toArray<T>(array: T | T[]): T[] {\n  return Array.isArray(array) ? array : [array];\n}\n\nexport function isFunction(value: any): boolean {\n  return typeof value === \"function\";\n}\n\nexport function isHijackingTag(tagName?: string) {\n  return (\n    tagName?.toUpperCase() === \"LINK\" ||\n    tagName?.toUpperCase() === \"STYLE\" ||\n    tagName?.toUpperCase() === \"SCRIPT\" ||\n    tagName?.toUpperCase() === \"IFRAME\"\n  );\n}\n\nexport const wujieSupport = window.Proxy && window.CustomElementRegistry;\n\n/**\n * in safari\n * typeof document.all === 'undefined' // true\n * typeof document.all === 'function' // true\n * We need to discriminate safari for better performance\n */\nconst naughtySafari = typeof document.all === \"function\" && typeof document.all === \"undefined\";\nconst callableFnCacheMap = new WeakMap<CallableFunction, boolean>();\nexport const isCallable = (fn: any) => {\n  if (callableFnCacheMap.has(fn)) {\n    return true;\n  }\n\n  const callable = naughtySafari ? typeof fn === \"function\" && typeof fn !== \"undefined\" : typeof fn === \"function\";\n  if (callable) {\n    callableFnCacheMap.set(fn, callable);\n  }\n  return callable;\n};\n\nconst boundedMap = new WeakMap<CallableFunction, boolean>();\nexport function isBoundedFunction(fn: CallableFunction) {\n  if (boundedMap.has(fn)) {\n    return boundedMap.get(fn);\n  }\n  const bounded = fn.name.indexOf(\"bound \") === 0 && !fn.hasOwnProperty(\"prototype\");\n  boundedMap.set(fn, bounded);\n  return bounded;\n}\n\nconst fnRegexCheckCacheMap = new WeakMap<any | FunctionConstructor, boolean>();\nexport function isConstructable(fn: () => any | FunctionConstructor) {\n  const hasPrototypeMethods =\n    fn.prototype && fn.prototype.constructor === fn && Object.getOwnPropertyNames(fn.prototype).length > 1;\n\n  if (hasPrototypeMethods) return true;\n\n  if (fnRegexCheckCacheMap.has(fn)) {\n    return fnRegexCheckCacheMap.get(fn);\n  }\n\n  let constructable = hasPrototypeMethods;\n  if (!constructable) {\n    const fnString = fn.toString();\n    const constructableFunctionRegex = /^function\\b\\s[A-Z].*/;\n    const classRegex = /^class\\b/;\n    constructable = constructableFunctionRegex.test(fnString) || classRegex.test(fnString);\n  }\n\n  fnRegexCheckCacheMap.set(fn, constructable);\n  return constructable;\n}\n\n// bughttps://github.com/Tencent/wujie/issues/770\nconst setFnCacheMap = new WeakMap<\n  Window | Document | ShadowRoot | Location,\n  WeakMap<CallableFunction, CallableFunction>\n>();\n\nexport function checkProxyFunction(target: Window | Document | ShadowRoot | Location, value: any) {\n  if (isCallable(value) && !isBoundedFunction(value) && !isConstructable(value)) {\n    if (!setFnCacheMap.has(target)) {\n      setFnCacheMap.set(target, new WeakMap());\n      setFnCacheMap.get(target).set(value, value);\n    } else if (!setFnCacheMap.get(target).has(value)) {\n      setFnCacheMap.get(target).set(value, value);\n    }\n  }\n}\n\nexport function getTargetValue(target: any, p: any): any {\n  const value = target[p];\n  if (setFnCacheMap.has(target) && setFnCacheMap.get(target).has(value)) {\n    return setFnCacheMap.get(target).get(value);\n  }\n  if (isCallable(value) && !isBoundedFunction(value) && !isConstructable(value)) {\n    const boundValue = Function.prototype.bind.call(value, target);\n    if (setFnCacheMap.has(target)) {\n      setFnCacheMap.get(target).set(value, boundValue);\n    } else {\n      setFnCacheMap.set(target, new WeakMap());\n      setFnCacheMap.get(target).set(value, boundValue);\n    }\n    for (const key in value) {\n      boundValue[key] = value[key];\n    }\n    if (value.hasOwnProperty(\"prototype\") && !boundValue.hasOwnProperty(\"prototype\")) {\n      // https://github.com/kuitos/kuitos.github.io/issues/47\n      Object.defineProperty(boundValue, \"prototype\", { value: value.prototype, enumerable: false, writable: true });\n    }\n    return boundValue;\n  }\n  return value;\n}\n\nexport function getDegradeIframe(id: string): HTMLIFrameElement {\n  return window.document.querySelector(`iframe[${WUJIE_APP_ID}=\"${id}\"]`);\n}\n\nexport function setAttrsToElement(element: HTMLElement, attrs: { [key: string]: any }) {\n  Object.keys(attrs).forEach((name) => {\n    element.setAttribute(name, attrs[name]);\n  });\n}\n\nexport function appRouteParse(url: string): {\n  urlElement: HTMLAnchorElement;\n  appHostPath: string;\n  appRoutePath: string;\n} {\n  if (!url) {\n    error(WUJIE_TIPS_NO_URL);\n    throw new Error();\n  }\n  const urlElement = anchorElementGenerator(url);\n  const appHostPath = urlElement.protocol + \"//\" + urlElement.host;\n  let appRoutePath = urlElement.pathname + urlElement.search + urlElement.hash;\n  if (!appRoutePath.startsWith(\"/\")) appRoutePath = \"/\" + appRoutePath; // hack ie\n  return { urlElement, appHostPath, appRoutePath };\n}\n\nexport function anchorElementGenerator(url: string): HTMLAnchorElement {\n  const element = window.document.createElement(\"a\");\n  element.href = url;\n  element.href = element.href; // hack ie\n  return element;\n}\n\nexport function getAnchorElementQueryMap(anchorElement: HTMLAnchorElement): { [key: string]: string } {\n  const queryString = anchorElement.search || \"\";\n  return [...new URLSearchParams(queryString).entries()].reduce((p, c) => {\n    p[c[0]] = c[1];\n    return p;\n  }, {} as Record<string, string>);\n}\n\n/**\n * urlid\n */\nexport function isMatchSyncQueryById(id: string): boolean {\n  const queryMap = getAnchorElementQueryMap(anchorElementGenerator(window.location.href));\n  return Object.keys(queryMap).includes(id);\n}\n\n/**\n * \n * @param iframeWindow\n */\nexport function fixElementCtrSrcOrHref(\n  iframeWindow: Window,\n  elementCtr:\n    | typeof HTMLImageElement\n    | typeof HTMLAnchorElement\n    | typeof HTMLSourceElement\n    | typeof HTMLLinkElement\n    | typeof HTMLScriptElement\n    | typeof HTMLMediaElement,\n  attr\n): void {\n  // patch setAttribute\n  const rawElementSetAttribute = iframeWindow.Element.prototype.setAttribute;\n  elementCtr.prototype.setAttribute = function (name: string, value: string): void {\n    let targetValue = value;\n    if (name === attr) targetValue = getAbsolutePath(value, this.baseURI || \"\", true);\n    rawElementSetAttribute.call(this, name, targetValue);\n  };\n  // patch href get and set\n  const rawAnchorElementHrefDescriptor = Object.getOwnPropertyDescriptor(elementCtr.prototype, attr);\n  const { enumerable, configurable, get, set } = rawAnchorElementHrefDescriptor;\n  Object.defineProperty(elementCtr.prototype, attr, {\n    enumerable,\n    configurable,\n    get: function () {\n      return get.call(this);\n    },\n    set: function (href) {\n      set.call(this, getAbsolutePath(href, this.baseURI, true));\n    },\n  });\n  // TODO: innerHTML\n}\n\nexport function getCurUrl(proxyLocation: Object): string {\n  const location = proxyLocation as Location;\n  return location.protocol + \"//\" + location.host + location.pathname;\n}\n\nexport function getAbsolutePath(url: string, base: string, hash?: boolean): string {\n  try {\n    // \n    if (url) {\n      // hash\n      if (hash && url.startsWith(\"#\")) return url;\n      return new URL(url, base).href;\n    } else return url;\n  } catch {\n    return url;\n  }\n}\n/**\n * url\n */\nexport function getSyncUrl(id: string, prefix: { [key: string]: string }): string {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  winUrlElement = null;\n  const syncUrl = queryMap[id] || \"\";\n  const validShortPath = syncUrl.match(/^{([^}]*)}/)?.[1];\n  if (prefix && validShortPath) {\n    return syncUrl.replace(`{${validShortPath}}`, prefix[validShortPath]);\n  }\n  return syncUrl;\n}\n// @ts-ignore\nexport const requestIdleCallback = window.requestIdleCallback || ((cb: Function) => setTimeout(cb, 1));\n\nexport function getContainer(container: string | HTMLElement): HTMLElement {\n  return typeof container === \"string\" ? (document.querySelector(container) as HTMLElement) : container;\n}\n\nexport function warn(msg: string, data?: any): void {\n  console?.warn(`[wujie warn]: ${msg}`, data);\n}\n\nexport function error(msg: string, data?: any): void {\n  console?.error(`[wujie error]: ${msg}`, data);\n}\n\nexport function getInlineCode(match) {\n  const start = match.indexOf(\">\") + 1;\n  const end = match.lastIndexOf(\"<\");\n  return match.substring(start, end);\n}\n\nexport function defaultGetPublicPath(entry) {\n  if (typeof entry === \"object\") {\n    return \"/\";\n  }\n  try {\n    const { origin, pathname } = new URL(entry, location.href);\n    const paths = pathname.split(\"/\");\n    // \n    paths.pop();\n    return `${origin}${paths.join(\"/\")}/`;\n  } catch (e) {\n    console.warn(e);\n    return \"\";\n  }\n}\n\n/** [f1, f2, f3, f4] => f4(f3(f2(f1)))  */\nexport function compose(fnList: Array<Function>): (...args: Array<string>) => string {\n  return function (code: string, ...args: Array<any>) {\n    return fnList.reduce((newCode, fn) => (isFunction(fn) ? fn(newCode, ...args) : newCode), code || \"\");\n  };\n}\n\n// \nexport function nextTick(cb: () => any): void {\n  Promise.resolve().then(cb);\n}\n\n//\nexport function execHooks(plugins: Array<plugin>, hookName: string, ...args: Array<any>): void {\n  try {\n    if (plugins && plugins.length > 0) {\n      plugins\n        .map((plugin) => plugin[hookName])\n        .filter((hook) => isFunction(hook))\n        .forEach((hook) => hook(...args));\n    }\n  } catch (e) {\n    error(e);\n  }\n}\n\nexport function isScriptElement(element: HTMLElement): boolean {\n  return element.tagName?.toUpperCase() === \"SCRIPT\";\n}\n\nlet count = 1;\nexport function setTagToScript(element: HTMLScriptElement, tag?: string): void {\n  if (isScriptElement(element)) {\n    const scriptTag = tag || String(count++);\n    element.setAttribute(WUJIE_SCRIPT_ID, scriptTag);\n  }\n}\n\nexport function getTagFromScript(element: HTMLScriptElement): string | null {\n  if (isScriptElement(element)) {\n    return element.getAttribute(WUJIE_SCRIPT_ID);\n  }\n  return null;\n}\n\n// \nexport function mergeOptions(options: cacheOptions, cacheOptions: cacheOptions) {\n  return {\n    name: options.name,\n    el: options.el || cacheOptions?.el,\n    url: options.url || cacheOptions?.url,\n    html: options.html || cacheOptions?.html,\n    exec: options.exec !== undefined ? options.exec : cacheOptions?.exec,\n    replace: options.replace || cacheOptions?.replace,\n    fetch: options.fetch || cacheOptions?.fetch,\n    props: options.props || cacheOptions?.props,\n    sync: options.sync !== undefined ? options.sync : cacheOptions?.sync,\n    prefix: options.prefix || cacheOptions?.prefix,\n    loading: options.loading || cacheOptions?.loading,\n    //  {}\n    attrs: options.attrs !== undefined ? options.attrs : cacheOptions?.attrs || {},\n    degradeAttrs: options.degradeAttrs !== undefined ? options.degradeAttrs : cacheOptions?.degradeAttrs || {},\n    //  true\n    fiber: options.fiber !== undefined ? options.fiber : cacheOptions?.fiber !== undefined ? cacheOptions?.fiber : true,\n    alive: options.alive !== undefined ? options.alive : cacheOptions?.alive,\n    degrade: options.degrade !== undefined ? options.degrade : cacheOptions?.degrade,\n    plugins: options.plugins || cacheOptions?.plugins,\n    lifecycles: {\n      beforeLoad: options.beforeLoad || cacheOptions?.beforeLoad,\n      beforeMount: options.beforeMount || cacheOptions?.beforeMount,\n      afterMount: options.afterMount || cacheOptions?.afterMount,\n      beforeUnmount: options.beforeUnmount || cacheOptions?.beforeUnmount,\n      afterUnmount: options.afterUnmount || cacheOptions?.afterUnmount,\n      activated: options.activated || cacheOptions?.activated,\n      deactivated: options.deactivated || cacheOptions?.deactivated,\n      loadError: options.loadError || cacheOptions?.loadError,\n    },\n  };\n}\n\n/**\n * \n */\nexport function eventTrigger(el: HTMLElement | Window | Document, eventName: string, detail?: any) {\n  let event;\n  if (typeof window.CustomEvent === \"function\") {\n    event = new CustomEvent(eventName, { detail });\n  } else {\n    event = document.createEvent(\"CustomEvent\");\n    event.initCustomEvent(eventName, true, false, detail);\n  }\n  el.dispatchEvent(event);\n}\n\nexport function stopMainAppRun() {\n  warn(WUJIE_TIPS_STOP_APP_DETAIL);\n  throw new Error(WUJIE_TIPS_STOP_APP);\n}\n","import { getInlineCode } from \"./utils\";\n\nconst ALL_SCRIPT_REGEX = /(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gi;\nconst SCRIPT_TAG_REGEX = /<(script)\\s+((?!type=('|\")text\\/ng-template\\3).)*?>.*?<\\/\\1>/is;\nconst SCRIPT_SRC_REGEX = /.*\\ssrc=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_TYPE_REGEX = /.*\\stype=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_ENTRY_REGEX = /.*\\sentry\\s*.*/;\nconst SCRIPT_ASYNC_REGEX = /.*\\sasync\\s*.*/;\nconst DEFER_ASYNC_REGEX = /.*\\sdefer\\s*.*/;\nconst SCRIPT_NO_MODULE_REGEX = /.*\\snomodule\\s*.*/;\nconst SCRIPT_MODULE_REGEX = /.*\\stype=('|\")?module('|\")?\\s*.*/;\nconst LINK_TAG_REGEX = /<(link)\\s+.*?>/gis;\nconst LINK_PRELOAD_OR_PREFETCH_REGEX = /\\srel=('|\")?(preload|prefetch|modulepreload)\\1/;\nconst LINK_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst LINK_AS_FONT = /.*\\sas=('|\")?font\\1.*/;\nconst STYLE_TAG_REGEX = /<style[^>]*>[\\s\\S]*?<\\/style>/gi;\nconst STYLE_TYPE_REGEX = /\\s+rel=('|\")?stylesheet\\1.*/;\nconst STYLE_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst HTML_COMMENT_REGEX = /<!--([\\s\\S]*?)-->/g;\nconst LINK_IGNORE_REGEX = /<link(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst STYLE_IGNORE_REGEX = /<style(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst SCRIPT_IGNORE_REGEX = /<script(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst CROSS_ORIGIN_REGEX = /.*\\scrossorigin=?('|\")?(use-credentials|anonymous)?('|\")?/i;\n\nexport type ScriptAttributes = {\n  [key: string]: string | boolean; // \n};\n/**  */\nexport interface ScriptBaseObject {\n  /**  */\n  src?: string;\n  /** async */\n  async?: boolean;\n  /** defer */\n  defer?: boolean;\n  /** module */\n  module?: boolean;\n  /** crossorigin */\n  crossorigin?: boolean;\n  /** crossorigin */\n  crossoriginType?: \"anonymous\" | \"use-credentials\" | \"\";\n  /**  */\n  attrs?: ScriptAttributes;\n}\nexport type ScriptObject = ScriptBaseObject & {\n  /** script */\n  content?: string;\n  /**  */\n  ignore?: boolean;\n  /**  */\n  onload?: Function;\n};\n\n/**  */\nexport interface StyleObject {\n  /**   */\n  src?: string;\n  /**  */\n  content?: string;\n  /**  */\n  ignore?: boolean;\n}\n\nexport interface TemplateResult {\n  template: string;\n  scripts: ScriptObject[];\n  styles: StyleObject[];\n  entry: string | ScriptObject;\n}\n\nfunction hasProtocol(url) {\n  return url.startsWith(\"//\") || url.startsWith(\"http://\") || url.startsWith(\"https://\");\n}\n\nfunction getEntirePath(path, baseURI) {\n  return new URL(path, baseURI).toString();\n}\n\nfunction isValidJavaScriptType(type) {\n  const handleTypes = [\n    \"text/javascript\",\n    \"module\",\n    \"application/javascript\",\n    \"text/ecmascript\",\n    \"application/ecmascript\",\n    \"importmap\",\n  ];\n  return !type || handleTypes.indexOf(type) !== -1;\n}\n\n/**\n * \n * @param scriptOuterHTML script  outerHTML\n * @returns  script \n */\nexport function parseTagAttributes(TagOuterHTML) {\n  const pattern = /<[-\\w]+\\s+([^>]*)>/i;\n  const matches = pattern.exec(TagOuterHTML);\n\n  if (!matches) {\n    return {};\n  }\n\n  const attributesString = matches[1];\n  const attributesPattern = /([^\\s=]+)\\s*=\\s*(['\"])(.*?)\\2/g;\n  const attributesObject = {};\n\n  let attributeMatches;\n  while ((attributeMatches = attributesPattern.exec(attributesString)) !== null) {\n    const attributeName = attributeMatches[1];\n    const attributeValue = attributeMatches[3];\n    attributesObject[attributeName] = attributeValue;\n  }\n\n  return attributesObject;\n}\n\nfunction isModuleScriptSupported() {\n  const s = window.document.createElement(\"script\");\n  return \"noModule\" in s;\n}\n\nexport const genLinkReplaceSymbol = (linkHref, preloadOrPrefetch = false) =>\n  `<!-- ${preloadOrPrefetch ? \"prefetch/preload/modulepreload\" : \"\"} link ${linkHref} replaced by wujie -->`;\nexport const getInlineStyleReplaceSymbol = (index) => `<!-- inline-style-${index} replaced by wujie -->`;\nexport const genScriptReplaceSymbol = (scriptSrc, type = \"\") =>\n  `<!-- ${type} script ${scriptSrc} replaced by wujie -->`;\nexport const inlineScriptReplaceSymbol = \"<!-- inline scripts replaced by wujie -->\";\nexport const genIgnoreAssetReplaceSymbol = (url) => `<!-- ignore asset ${url || \"file\"} replaced by wujie -->`;\nexport const genModuleScriptReplaceSymbol = (scriptSrc, moduleSupport) =>\n  `<!-- ${moduleSupport ? \"nomodule\" : \"module\"} script ${scriptSrc} ignored by wujie -->`;\n\n/**\n * parse the script link from the template\n * 1. collect stylesheets\n * 2. use global eval to evaluate the inline scripts\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function#Difference_between_Function_constructor_and_function_declaration\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Do_not_ever_use_eval!\n * @param tpl\n * @param baseURI\n * @stripStyles whether to strip the css links\n * @returns {{template: void | string | *, scripts: *[], entry: *}}\n */\nexport default function processTpl(tpl: String, baseURI: String, postProcessTemplate?: Function): TemplateResult {\n  const scripts: ScriptObject[] = [];\n  const styles: StyleObject[] = [];\n  let entry = null;\n  const moduleSupport = isModuleScriptSupported();\n  const template = tpl\n\n    /*\n     remove html comment first\n     */\n    .replace(HTML_COMMENT_REGEX, \"\")\n\n    .replace(LINK_TAG_REGEX, (match) => {\n      /*\n       change the css link\n       */\n      const styleType = !!match.match(STYLE_TYPE_REGEX);\n      if (styleType) {\n        const styleHref = match.match(STYLE_HREF_REGEX);\n        const styleIgnore = match.match(LINK_IGNORE_REGEX);\n\n        if (styleHref) {\n          const href = styleHref && styleHref[2];\n          let newHref = href;\n\n          if (href && !hasProtocol(href)) {\n            newHref = getEntirePath(href, baseURI);\n          }\n          if (styleIgnore) {\n            return genIgnoreAssetReplaceSymbol(newHref);\n          }\n\n          styles.push({ src: newHref });\n          return genLinkReplaceSymbol(newHref);\n        }\n      }\n\n      const preloadOrPrefetchType =\n        match.match(LINK_PRELOAD_OR_PREFETCH_REGEX) && match.match(LINK_HREF_REGEX) && !match.match(LINK_AS_FONT);\n      if (preloadOrPrefetchType) {\n        const [, , linkHref] = match.match(LINK_HREF_REGEX);\n        return genLinkReplaceSymbol(linkHref, true);\n      }\n\n      return match;\n    })\n    .replace(STYLE_TAG_REGEX, (match) => {\n      if (STYLE_IGNORE_REGEX.test(match)) {\n        return genIgnoreAssetReplaceSymbol(\"style file\");\n      } else {\n        const code = getInlineCode(match);\n        styles.push({ src: \"\", content: code });\n        return getInlineStyleReplaceSymbol(styles.length - 1);\n      }\n    })\n    .replace(ALL_SCRIPT_REGEX, (match, scriptTag) => {\n      const scriptIgnore = scriptTag.match(SCRIPT_IGNORE_REGEX);\n      const isModuleScript = !!scriptTag.match(SCRIPT_MODULE_REGEX);\n      const isCrossOriginScript = scriptTag.match(CROSS_ORIGIN_REGEX);\n      const crossOriginType = isCrossOriginScript?.[2] || \"\";\n      const moduleScriptIgnore =\n        (moduleSupport && !!scriptTag.match(SCRIPT_NO_MODULE_REGEX)) || (!moduleSupport && isModuleScript);\n      // in order to keep the exec order of all javascripts\n\n      const matchedScriptTypeMatch = scriptTag.match(SCRIPT_TYPE_REGEX);\n      const matchedScriptType = matchedScriptTypeMatch && matchedScriptTypeMatch[2];\n      if (!isValidJavaScriptType(matchedScriptType)) {\n        return match;\n      }\n\n      // if it is a external script\n      if (SCRIPT_TAG_REGEX.test(match) && scriptTag.match(SCRIPT_SRC_REGEX)) {\n        /*\n         collect scripts and replace the ref\n         */\n\n        const matchedScriptEntry = scriptTag.match(SCRIPT_ENTRY_REGEX);\n        const matchedScriptSrcMatch = scriptTag.match(SCRIPT_SRC_REGEX);\n        let matchedScriptSrc = matchedScriptSrcMatch && matchedScriptSrcMatch[2];\n\n        if (entry && matchedScriptEntry) {\n          throw new SyntaxError(\"You should not set multiply entry script!\");\n        } else {\n          // append the domain while the script not have an protocol prefix\n          if (matchedScriptSrc && !hasProtocol(matchedScriptSrc)) {\n            matchedScriptSrc = getEntirePath(matchedScriptSrc, baseURI);\n          }\n\n          entry = entry || (matchedScriptEntry && matchedScriptSrc);\n        }\n\n        if (scriptIgnore) {\n          return genIgnoreAssetReplaceSymbol(matchedScriptSrc || \"js file\");\n        }\n\n        if (moduleScriptIgnore) {\n          return genModuleScriptReplaceSymbol(matchedScriptSrc || \"js file\", moduleSupport);\n        }\n\n        if (matchedScriptSrc) {\n          const isAsyncScript = !!scriptTag.match(SCRIPT_ASYNC_REGEX);\n          const isDeferScript = !!scriptTag.match(DEFER_ASYNC_REGEX);\n          scripts.push(\n            isAsyncScript || isDeferScript\n              ? {\n                  async: isAsyncScript,\n                  defer: isDeferScript,\n                  src: matchedScriptSrc,\n                  module: isModuleScript,\n                  crossorigin: !!isCrossOriginScript,\n                  crossoriginType: crossOriginType,\n                  attrs: parseTagAttributes(match),\n                }\n              : {\n                  src: matchedScriptSrc,\n                  module: isModuleScript,\n                  crossorigin: !!isCrossOriginScript,\n                  crossoriginType: crossOriginType,\n                  attrs: parseTagAttributes(match),\n                }\n          );\n          return genScriptReplaceSymbol(\n            matchedScriptSrc,\n            (isAsyncScript && \"async\") || (isDeferScript && \"defer\") || \"\"\n          );\n        }\n\n        return match;\n      } else {\n        if (scriptIgnore) {\n          return genIgnoreAssetReplaceSymbol(\"js file\");\n        }\n\n        if (moduleScriptIgnore) {\n          return genModuleScriptReplaceSymbol(\"js file\", moduleSupport);\n        }\n\n        // if it is an inline script\n        const code = getInlineCode(match);\n\n        // remove script blocks when all of these lines are comments.\n        const isPureCommentBlock = code.split(/[\\r\\n]+/).every((line) => !line.trim() || line.trim().startsWith(\"//\"));\n\n        if (!isPureCommentBlock && code) {\n          scripts.push({\n            src: \"\",\n            content: code,\n            module: isModuleScript,\n            crossorigin: !!isCrossOriginScript,\n            crossoriginType: crossOriginType,\n            attrs: parseTagAttributes(match),\n          });\n        }\n\n        return inlineScriptReplaceSymbol;\n      }\n    });\n\n  let tplResult = {\n    template,\n    scripts,\n    styles,\n    // set the last script as entry if have not set\n    entry: entry || scripts[scripts.length - 1],\n  };\n  if (typeof postProcessTemplate === \"function\") {\n    tplResult = postProcessTemplate(tplResult);\n  }\n\n  return tplResult;\n}\n","import { plugin, ScriptObjectLoader } from \"./index\";\nimport { StyleObject } from \"./template\";\nimport { compose, getAbsolutePath } from \"./utils\";\n\ninterface loaderOption {\n  plugins: Array<plugin>;\n  replace: (code: string) => string;\n}\n\n/**\n *  cssLoader\n */\nexport function getCssLoader({ plugins, replace }: loaderOption) {\n  return (code: string, src: string = \"\", base: string): string =>\n    compose(plugins.map((plugin) => plugin.cssLoader))(replace ? replace(code) : code, src, base);\n}\n\n/**\n *  jsLoader\n */\nexport function getJsLoader({ plugins, replace }: loaderOption) {\n  return (code: string, src: string = \"\", base: string): string =>\n    compose(plugins.map((plugin) => plugin.jsLoader))(replace ? replace(code) : code, src, base);\n}\n\n/**\n * \n */\ntype presetLoadersType = \"cssBeforeLoaders\" | \"cssAfterLoaders\" | \"jsBeforeLoaders\" | \"jsAfterLoaders\";\nexport function getPresetLoaders(loaderType: presetLoadersType, plugins: Array<plugin>): plugin[presetLoadersType] {\n  const loaders: (StyleObject | ScriptObjectLoader)[][] = plugins\n    .map((plugin) => plugin[loaderType])\n    .filter((loaders) => loaders?.length);\n  const res = loaders.reduce((preLoaders, curLoaders) => preLoaders.concat(curLoaders), []);\n  return loaderType === \"cssBeforeLoaders\" ? res.reverse() : res;\n}\n\n/**\n * \n */\ntype effectLoadersType = \"jsExcludes\" | \"cssExcludes\" | \"jsIgnores\" | \"cssIgnores\";\nexport function getEffectLoaders(loaderType: effectLoadersType, plugins: Array<plugin>): plugin[effectLoadersType] {\n  return plugins\n    .map((plugin) => plugin[loaderType])\n    .filter((loaders) => loaders?.length)\n    .reduce((preLoaders, curLoaders) => preLoaders.concat(curLoaders), []);\n}\n\n//  url loader\nexport function isMatchUrl(url: string, effectLoaders: plugin[effectLoadersType]): boolean {\n  return effectLoaders.some((loader) => (typeof loader === \"string\" ? url === loader : loader.test(url)));\n}\n\n/**\n * css\n */\nfunction cssRelativePathResolve(code: string, src: string, base: string) {\n  const baseUrl = src ? getAbsolutePath(src, base) : base;\n  /**\n   * https://developer.mozilla.org/en-US/docs/Web/CSS/url\n   *\n   * : const urlReg = /(url\\((?!['\"]?(?:data):)['\"]?)([^'\")]*)(['\"]?\\))/g;\n   *\n   * url(xxx)xxx\n   * base64data:base64svgurl\n   *\n   * eg:\n   * background: url(data:image/svg+xml;charset=utf-8,<svg><path fill=url(#a)></path></svg>)\n   * #asvg\n   *\n   *  */\n  const urlReg = /url\\((['\"]?)((?:[^()]+|\\((?:[^()]+|\\([^()]*\\))*\\))*)(\\1)\\)/g;\n\n  return code.replace(urlReg, (_m, pre, url, post) => {\n    const base64Regx = /^data:/;\n    const isBase64 = base64Regx.test(url);\n\n    /** data:base64 */\n    if (isBase64) {\n      return _m;\n    }\n\n    return `url(${pre}${getAbsolutePath(url, baseUrl)}${post})`;\n  });\n}\n\nconst defaultPlugin = {\n  cssLoader: cssRelativePathResolve,\n  // fix https://github.com/Tencent/wujie/issues/455\n  cssBeforeLoaders: [{ content: \"html {view-transition-name: none;}\" }],\n};\n\nexport function getPlugins(plugins: Array<plugin>): Array<plugin> {\n  return Array.isArray(plugins) ? [defaultPlugin, ...plugins] : [defaultPlugin];\n}\n\nexport default defaultPlugin;\n","import processTpl, {\n  genLinkReplaceSymbol,\n  getInlineStyleReplaceSymbol,\n  ScriptObject,\n  ScriptBaseObject,\n  StyleObject,\n} from \"./template\";\nimport { defaultGetPublicPath, getInlineCode, requestIdleCallback, error, compose, getCurUrl } from \"./utils\";\nimport {\n  WUJIE_TIPS_NO_FETCH,\n  WUJIE_TIPS_SCRIPT_ERROR_REQUESTED,\n  WUJIE_TIPS_CSS_ERROR_REQUESTED,\n  WUJIE_TIPS_HTML_ERROR_REQUESTED,\n} from \"./constant\";\nimport { getEffectLoaders, isMatchUrl } from \"./plugin\";\nimport Wujie from \"./sandbox\";\nimport { plugin, loadErrorHandler } from \"./index\";\n\nexport type ScriptResultList = (ScriptBaseObject & { contentPromise: Promise<string> })[];\nexport type StyleResultList = { src: string; contentPromise: Promise<string>; ignore?: boolean }[];\n\ninterface htmlParseResult {\n  template: string;\n\n  assetPublicPath: string;\n\n  getExternalScripts(): ScriptResultList;\n\n  getExternalStyleSheets(): StyleResultList;\n}\n\ntype ImportEntryOpts = {\n  fetch?: typeof window.fetch;\n  fiber?: boolean;\n  plugins?: Array<plugin>;\n  loadError?: loadErrorHandler;\n};\n\nconst styleCache = {};\nconst scriptCache = {};\nconst embedHTMLCache = {};\n\nif (!window.fetch) {\n  error(WUJIE_TIPS_NO_FETCH);\n  throw new Error();\n}\nconst defaultFetch = window.fetch.bind(window);\n\nfunction defaultGetTemplate(tpl) {\n  return tpl;\n}\n\n/**\n * css-loader\n */\nexport async function processCssLoader(\n  sandbox: Wujie,\n  template: string,\n  getExternalStyleSheets: () => StyleResultList\n): Promise<string> {\n  const curUrl = getCurUrl(sandbox.proxyLocation);\n  /** css-loader */\n  const composeCssLoader = compose(sandbox.plugins.map((plugin) => plugin.cssLoader));\n  const processedCssList: StyleResultList = getExternalStyleSheets().map(({ src, ignore, contentPromise }) => ({\n    src,\n    ignore,\n    contentPromise: contentPromise.then((content) => composeCssLoader(content, src, curUrl)),\n  }));\n  const embedHTML = await getEmbedHTML(template, processedCssList);\n  return sandbox.replace ? sandbox.replace(embedHTML) : embedHTML;\n}\n\n/**\n * convert external css link to inline style for performance optimization\n * @return embedHTML\n */\nasync function getEmbedHTML(template, styleResultList: StyleResultList): Promise<string> {\n  let embedHTML = template;\n\n  return Promise.all(\n    styleResultList.map((styleResult, index) =>\n      styleResult.contentPromise.then((content) => {\n        if (styleResult.src) {\n          embedHTML = embedHTML.replace(\n            genLinkReplaceSymbol(styleResult.src),\n            styleResult.ignore\n              ? `<link href=\"${styleResult.src}\" rel=\"stylesheet\" type=\"text/css\">`\n              : `<style>/* ${styleResult.src} */${content}</style>`\n          );\n        } else if (content) {\n          embedHTML = embedHTML.replace(\n            getInlineStyleReplaceSymbol(index),\n            `<style>/* inline-style-${index} */${content}</style>`\n          );\n        }\n      })\n    )\n  ).then(() => embedHTML);\n}\n\nconst isInlineCode = (code) => code.startsWith(\"<\");\n\nconst fetchAssets = (\n  src: string,\n  cache: Object,\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response>,\n  cssFlag?: boolean,\n  loadError?: loadErrorHandler\n) =>\n  cache[src] ||\n  (cache[src] = fetch(src)\n    .then((response) => {\n      // usually browser treats 4xx and 5xx response of script loading as an error and will fire a script error event\n      // https://stackoverflow.com/questions/5625420/what-http-headers-responses-trigger-the-onerror-handler-on-a-script-tag/5625603\n      if (response.status >= 400) {\n        cache[src] = null;\n        if (cssFlag) {\n          error(WUJIE_TIPS_CSS_ERROR_REQUESTED, { src, response });\n          loadError?.(src, new Error(WUJIE_TIPS_CSS_ERROR_REQUESTED));\n          return \"\";\n        } else {\n          error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, { src, response });\n          loadError?.(src, new Error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED));\n          throw new Error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED);\n        }\n      }\n      return response.text();\n    })\n    .catch((e) => {\n      cache[src] = null;\n      if (cssFlag) {\n        error(WUJIE_TIPS_CSS_ERROR_REQUESTED, src);\n        loadError?.(src, e);\n        return \"\";\n      } else {\n        error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, src);\n        loadError?.(src, e);\n        return \"\";\n      }\n    }));\n\n// for prefetch\nexport function getExternalStyleSheets(\n  styles: StyleObject[],\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response> = defaultFetch,\n  loadError: loadErrorHandler\n): StyleResultList {\n  return styles.map(({ src, content, ignore }) => {\n    // \n    if (content) {\n      return { src: \"\", contentPromise: Promise.resolve(content) };\n    } else if (isInlineCode(src)) {\n      // if it is inline style\n      return { src: \"\", contentPromise: Promise.resolve(getInlineCode(src)) };\n    } else {\n      // external styles\n      return {\n        src,\n        ignore,\n        contentPromise: ignore ? Promise.resolve(\"\") : fetchAssets(src, styleCache, fetch, true, loadError),\n      };\n    }\n  });\n}\n\n// for prefetch\nexport function getExternalScripts(\n  scripts: ScriptObject[],\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response> = defaultFetch,\n  loadError: loadErrorHandler,\n  fiber: boolean\n): ScriptResultList {\n  // module should be requested in iframe\n  return scripts.map((script) => {\n    const { src, async, defer, module, ignore } = script;\n    let contentPromise = null;\n    // async\n    if ((async || defer) && src && !module) {\n      contentPromise = new Promise((resolve, reject) =>\n        fiber\n          ? requestIdleCallback(() => fetchAssets(src, scriptCache, fetch, false, loadError).then(resolve, reject))\n          : fetchAssets(src, scriptCache, fetch, false, loadError).then(resolve, reject)\n      );\n      // module || ignore\n    } else if ((module && src) || ignore) {\n      contentPromise = Promise.resolve(\"\");\n      // inline\n    } else if (!src) {\n      contentPromise = Promise.resolve(script.content);\n      // outline\n    } else {\n      contentPromise = fetchAssets(src, scriptCache, fetch, false, loadError);\n    }\n    // refer https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer\n    if (module && !async) script.defer = true;\n    return { ...script, contentPromise };\n  });\n}\n\nexport default function importHTML(params: {\n  url: string;\n  html?: string;\n  opts: ImportEntryOpts;\n}): Promise<htmlParseResult> {\n  const { url, opts, html } = params;\n  const fetch = opts.fetch ?? defaultFetch;\n  const fiber = opts.fiber ?? true;\n  const { plugins, loadError } = opts;\n  const htmlLoader = plugins ? compose(plugins.map((plugin) => plugin.htmlLoader)) : defaultGetTemplate;\n  const jsExcludes = getEffectLoaders(\"jsExcludes\", plugins);\n  const cssExcludes = getEffectLoaders(\"cssExcludes\", plugins);\n  const jsIgnores = getEffectLoaders(\"jsIgnores\", plugins);\n  const cssIgnores = getEffectLoaders(\"cssIgnores\", plugins);\n  const getPublicPath = defaultGetPublicPath;\n\n  const getHtmlParseResult = (url, html, htmlLoader) =>\n    (html\n      ? Promise.resolve(html)\n      : fetch(url)\n          .then((response) => {\n            if (response.status >= 400) {\n              error(WUJIE_TIPS_HTML_ERROR_REQUESTED, { url, response });\n              loadError?.(url, new Error(WUJIE_TIPS_HTML_ERROR_REQUESTED));\n              return \"\";\n            }\n            return response.text();\n          })\n          .catch((e) => {\n            embedHTMLCache[url] = null;\n            loadError?.(url, e);\n            return Promise.reject(e);\n          })\n    ).then((html) => {\n      const assetPublicPath = getPublicPath(url);\n      const { template, scripts, styles } = processTpl(htmlLoader(html), assetPublicPath);\n      return {\n        template: template,\n        assetPublicPath,\n        getExternalScripts: () =>\n          getExternalScripts(\n            scripts\n              .filter((script) => !script.src || !isMatchUrl(script.src, jsExcludes))\n              .map((script) => ({ ...script, ignore: script.src && isMatchUrl(script.src, jsIgnores) })),\n            fetch,\n            loadError,\n            fiber\n          ),\n        getExternalStyleSheets: () =>\n          getExternalStyleSheets(\n            styles\n              .filter((style) => !style.src || !isMatchUrl(style.src, cssExcludes))\n              .map((style) => ({ ...style, ignore: style.src && isMatchUrl(style.src, cssIgnores) })),\n            fetch,\n            loadError\n          ),\n      };\n    });\n\n  if (opts?.plugins.some((plugin) => plugin.htmlLoader)) {\n    return getHtmlParseResult(url, html, htmlLoader);\n    // html-loader\n  } else {\n    return embedHTMLCache[url] || (embedHTMLCache[url] = getHtmlParseResult(url, html, htmlLoader));\n  }\n}\n","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nfunction _wrapNativeSuper(t) {\n  var r = \"function\" == typeof Map ? new Map() : void 0;\n  return _wrapNativeSuper = function _wrapNativeSuper(t) {\n    if (null === t || !isNativeFunction(t)) return t;\n    if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n    if (void 0 !== r) {\n      if (r.has(t)) return r.get(t);\n      r.set(t, Wrapper);\n    }\n    function Wrapper() {\n      return construct(t, arguments, getPrototypeOf(this).constructor);\n    }\n    return Wrapper.prototype = Object.create(t.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), setPrototypeOf(Wrapper, t);\n  }, _wrapNativeSuper(t);\n}\nexport { _wrapNativeSuper as default };","function _isNativeFunction(t) {\n  try {\n    return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n  } catch (n) {\n    return \"function\" == typeof t;\n  }\n}\nexport { _isNativeFunction as default };","import isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}\nexport { _construct as default };","import Wujie from \"./sandbox\";\nimport { cacheOptions } from \"./index\";\nexport interface SandboxCache {\n  wujie?: Wujie;\n  options?: cacheOptions;\n}\n\nexport type appAddEventListenerOptions = AddEventListenerOptions & { targetWindow?: Window };\n\n// map\n// WuJie__WUJIE_INJECT\nexport const idToSandboxCacheMap = (() => {\n  if (window.__WUJIE_INJECT?.idToSandboxMap) return window.__WUJIE_INJECT.idToSandboxMap;\n  else {\n    const cacheMap = window.__POWERED_BY_WUJIE__\n      ? window.__WUJIE.inject.idToSandboxMap\n      : new Map<String, SandboxCache>();\n    window.__WUJIE_INJECT = { ...window.__WUJIE_INJECT, idToSandboxMap: cacheMap };\n    return cacheMap;\n  }\n})();\n\nexport function getWujieById(id: String): Wujie | null {\n  return idToSandboxCacheMap.get(id)?.wujie || null;\n}\n\nexport function getOptionsById(id: String): cacheOptions | null {\n  return idToSandboxCacheMap.get(id)?.options || null;\n}\n\nexport function addSandboxCacheWithWujie(id: string, sandbox: Wujie): void {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache) idToSandboxCacheMap.set(id, { ...wujieCache, wujie: sandbox });\n  else idToSandboxCacheMap.set(id, { wujie: sandbox });\n}\n\nexport function deleteWujieById(id: string) {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache?.options) idToSandboxCacheMap.set(id, { options: wujieCache.options });\n  idToSandboxCacheMap.delete(id);\n}\n\nexport function addSandboxCacheWithOptions(id: string, options: cacheOptions): void {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache) idToSandboxCacheMap.set(id, { ...wujieCache, options });\n  else idToSandboxCacheMap.set(id, { options });\n}\n\n// document\nexport const documentProxyProperties = {\n  // \n  modifyLocalProperties: [\n    \"createElement\",\n    \"createTextNode\",\n    \"documentURI\",\n    \"URL\",\n    \"getElementsByTagName\",\n    \"getElementById\",\n  ],\n\n  // \n  modifyProperties: [\n    \"createElement\",\n    \"createTextNode\",\n    \"documentURI\",\n    \"URL\",\n    \"getElementsByTagName\",\n    \"getElementsByClassName\",\n    \"getElementsByName\",\n    \"getElementById\",\n    \"querySelector\",\n    \"querySelectorAll\",\n    \"documentElement\",\n    \"scrollingElement\",\n    \"forms\",\n    \"images\",\n    \"links\",\n  ],\n\n  // shadowRoot\n  shadowProperties: [\n    \"activeElement\",\n    \"childElementCount\",\n    \"children\",\n    \"firstElementChild\",\n    \"firstChild\",\n    \"fullscreenElement\",\n    \"lastElementChild\",\n    \"pictureInPictureElement\",\n    \"pointerLockElement\",\n    \"styleSheets\",\n  ],\n\n  // shadowRoot\n  shadowMethods: [\n    \"append\",\n    \"contains\",\n    \"getSelection\",\n    \"elementFromPoint\",\n    \"elementsFromPoint\",\n    \"getAnimations\",\n    \"replaceChildren\",\n  ],\n\n  // document\n  documentProperties: [\n    \"characterSet\",\n    \"compatMode\",\n    \"contentType\",\n    \"designMode\",\n    \"dir\",\n    \"doctype\",\n    \"embeds\",\n    \"fullscreenEnabled\",\n    \"hidden\",\n    \"implementation\",\n    \"lastModified\",\n    \"pictureInPictureEnabled\",\n    \"plugins\",\n    \"readyState\",\n    \"referrer\",\n    \"visibilityState\",\n    \"fonts\",\n  ],\n\n  // document\n  documentMethods: [\n    \"execCommand\",\n    \"caretPositionFromPoint\",\n    \"createRange\",\n    \"exitFullscreen\",\n    \"exitPictureInPicture\",\n    \"getElementsByTagNameNS\",\n    \"hasFocus\",\n    \"prepend\",\n  ],\n\n  // document\n  documentEvents: [\n    \"onpointerlockchange\",\n    \"onpointerlockerror\",\n    \"onbeforecopy\",\n    \"onbeforecut\",\n    \"onbeforepaste\",\n    \"onfreeze\",\n    \"onresume\",\n    \"onsearch\",\n    \"onfullscreenchange\",\n    \"onfullscreenerror\",\n    \"onsecuritypolicyviolation\",\n    \"onvisibilitychange\",\n  ],\n\n  // \n  ownerProperties: [\"head\", \"body\"],\n};\n\n// iframe document\nexport const appDocumentAddEventListenerEvents = [\"DOMContentLoaded\", \"readystatechange\"];\nexport const appDocumentOnEvents = [\"onreadystatechange\"];\n// document\nexport const mainDocumentAddEventListenerEvents = [\n  \"fullscreenchange\",\n  \"fullscreenerror\",\n  \"selectionchange\",\n  \"visibilitychange\",\n  \"wheel\",\n  \"keydown\",\n  \"keypress\",\n  \"keyup\",\n];\n\n// documentshadow\nexport const mainAndAppAddEventListenerEvents = [\"gotpointercapture\", \"lostpointercapture\"];\n\n// windowiframe\nexport const appWindowAddEventListenerEvents = [\n  \"hashchange\",\n  \"popstate\",\n  \"DOMContentLoaded\",\n  \"load\",\n  \"beforeunload\",\n  \"unload\",\n  \"message\",\n  \"error\",\n  \"unhandledrejection\",\n];\n\n// window.onXXXiframe\nexport const appWindowOnEvent = [\"onload\", \"onbeforeunload\", \"onunload\", \"onerror\", \"onunhandledrejection\"];\n\n// tagattrmap\nexport const relativeElementTagAttrMap = {\n  IMG: \"src\",\n  A: \"href\",\n  SOURCE: \"src\",\n};\n\n// window\nexport const windowProxyProperties = [\"getComputedStyle\", \"visualViewport\", \"matchMedia\", \"DOMParser\"];\n\n// window\nexport const windowRegWhiteList = [\n  /animationFrame$/i,\n  /resizeObserver$|mutationObserver$|intersectionObserver$/i,\n  /height$|width$|left$/i,\n  /^screen/i,\n  /CSSStyleSheet$/i,\n  /X$|Y$/,\n];\n\n// \n// Document.prototype\nexport const rawElementAppendChild = HTMLElement.prototype.appendChild;\nexport const rawElementRemoveChild = HTMLElement.prototype.removeChild;\nexport const rawElementContains = HTMLElement.prototype.contains;\nexport const rawHeadInsertBefore = HTMLHeadElement.prototype.insertBefore;\nexport const rawBodyInsertBefore = HTMLBodyElement.prototype.insertBefore;\nexport const rawInsertAdjacentElement = HTMLStyleElement.prototype.insertAdjacentElement;\nexport const rawAddEventListener = Node.prototype.addEventListener;\nexport const rawRemoveEventListener = Node.prototype.removeEventListener;\nexport const rawWindowAddEventListener = window.addEventListener;\nexport const rawWindowRemoveEventListener = window.removeEventListener;\nexport const rawAppendChild = Node.prototype.appendChild;\nexport const rawDocumentQuerySelector = window.__POWERED_BY_WUJIE__\n  ? window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\n  : Document.prototype.querySelector;\n","import { getExternalStyleSheets, getExternalScripts } from \"./entry\";\nimport {\n  getWujieById,\n  rawAppendChild,\n  rawElementContains,\n  rawElementRemoveChild,\n  rawHeadInsertBefore,\n  rawBodyInsertBefore,\n  rawInsertAdjacentElement,\n  rawDocumentQuerySelector,\n  rawAddEventListener,\n  rawRemoveEventListener,\n} from \"./common\";\nimport {\n  isFunction,\n  isHijackingTag,\n  warn,\n  nextTick,\n  getCurUrl,\n  execHooks,\n  isScriptElement,\n  setTagToScript,\n  getTagFromScript,\n  setAttrsToElement,\n} from \"./utils\";\nimport { insertScriptToIframe, patchElementEffect } from \"./iframe\";\nimport Wujie from \"./sandbox\";\nimport { getPatchStyleElements } from \"./shadow\";\nimport { getCssLoader, getEffectLoaders, isMatchUrl } from \"./plugin\";\nimport { WUJIE_SCRIPT_ID, WUJIE_DATA_FLAG, WUJIE_TIPS_REPEAT_RENDER, WUJIE_TIPS_NO_SCRIPT } from \"./constant\";\nimport { ScriptObject, parseTagAttributes } from \"./template\";\n\nfunction patchCustomEvent(\n  e: CustomEvent,\n  elementGetter: () => HTMLScriptElement | HTMLLinkElement | null\n): CustomEvent {\n  Object.defineProperties(e, {\n    srcElement: {\n      get: elementGetter,\n    },\n    target: {\n      get: elementGetter,\n    },\n  });\n\n  return e;\n}\n\n/**\n * \n */\nfunction manualInvokeElementEvent(element: HTMLLinkElement | HTMLScriptElement, event: string): void {\n  const customEvent = new CustomEvent(event);\n  const patchedEvent = patchCustomEvent(customEvent, () => element);\n  if (isFunction(element[`on${event}`])) {\n    element[`on${event}`](patchedEvent);\n  } else {\n    element.dispatchEvent(patchedEvent);\n  }\n}\n\n/**\n * cssstylesheetElement\n */\nfunction handleStylesheetElementPatch(stylesheetElement: HTMLStyleElement & { _patcher?: any }, sandbox: Wujie) {\n  if (!stylesheetElement.innerHTML || sandbox.degrade) return;\n  const patcher = () => {\n    const [hostStyleSheetElement, fontStyleSheetElement] = getPatchStyleElements([stylesheetElement.sheet]);\n    if (hostStyleSheetElement) {\n      sandbox.shadowRoot.head.appendChild(hostStyleSheetElement);\n    }\n    if (fontStyleSheetElement) {\n      sandbox.shadowRoot.host.appendChild(fontStyleSheetElement);\n    }\n    stylesheetElement._patcher = undefined;\n  };\n  if (stylesheetElement._patcher) {\n    clearTimeout(stylesheetElement._patcher);\n  }\n  stylesheetElement._patcher = setTimeout(patcher, 50);\n}\n\n/**\n * \n */\nfunction patchStylesheetElement(\n  stylesheetElement: HTMLStyleElement & { _hasPatchStyle?: boolean },\n  cssLoader: (code: string, url: string, base: string) => string,\n  sandbox: Wujie,\n  curUrl: string\n) {\n  if (stylesheetElement._hasPatchStyle) return;\n  const innerHTMLDesc = Object.getOwnPropertyDescriptor(Element.prototype, \"innerHTML\");\n  const innerTextDesc = Object.getOwnPropertyDescriptor(HTMLElement.prototype, \"innerText\");\n  const textContentDesc = Object.getOwnPropertyDescriptor(Node.prototype, \"textContent\");\n  const RawInsertRule = stylesheetElement.sheet?.insertRule;\n  // cssRuleinnerHTML\n  function patchSheetInsertRule() {\n    if (!RawInsertRule) return;\n    stylesheetElement.sheet.insertRule = (rule: string, index?: number): number => {\n      innerHTMLDesc ? (stylesheetElement.innerHTML += rule) : (stylesheetElement.innerText += rule);\n      return RawInsertRule.call(stylesheetElement.sheet, rule, index);\n    };\n  }\n  patchSheetInsertRule();\n\n  if (innerHTMLDesc) {\n    Object.defineProperties(stylesheetElement, {\n      innerHTML: {\n        get: function () {\n          return innerHTMLDesc.get.call(stylesheetElement);\n        },\n        set: function (code: string) {\n          innerHTMLDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n          nextTick(() => handleStylesheetElementPatch(this, sandbox));\n        },\n      },\n    });\n  }\n\n  Object.defineProperties(stylesheetElement, {\n    innerText: {\n      get: function () {\n        return innerTextDesc.get.call(stylesheetElement);\n      },\n      set: function (code: string) {\n        innerTextDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n      },\n    },\n    textContent: {\n      get: function () {\n        return textContentDesc.get.call(stylesheetElement);\n      },\n      set: function (code: string) {\n        textContentDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n      },\n    },\n    appendChild: {\n      value: function (node: Node): Node {\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n        if (node.nodeType === Node.TEXT_NODE) {\n          const res = rawAppendChild.call(\n            stylesheetElement,\n            stylesheetElement.ownerDocument.createTextNode(cssLoader(node.textContent, \"\", curUrl))\n          );\n          // appendChildsheetpatch\n          patchSheetInsertRule();\n          return res;\n        } else return rawAppendChild(node);\n      },\n    },\n    insertAdjacentElement: {\n      value: function (this: HTMLStyleElement, position: InsertPosition, element: Element) {\n        if (element.nodeName === \"STYLE\") {\n          nextTick(() => handleStylesheetElementPatch(element as HTMLStyleElement, sandbox));\n          const res = rawInsertAdjacentElement.call(this, position, element);\n          sandbox.styleSheetElements.push(element as HTMLStyleElement);\n          return res;\n        } else return rawInsertAdjacentElement.call(this, position, element);\n      },\n    },\n    _hasPatchStyle: { get: () => true },\n  });\n}\n\nlet dynamicScriptExecStack = Promise.resolve();\nfunction rewriteAppendOrInsertChild(opts: {\n  rawDOMAppendOrInsertBefore: <T extends Node>(newChild: T, refChild?: Node | null) => T;\n  wujieId: string;\n}) {\n  return function appendChildOrInsertBefore<T extends Node>(\n    this: HTMLHeadElement | HTMLBodyElement,\n    newChild: T,\n    refChild?: Node | null\n  ) {\n    let element = newChild as any;\n    const { rawDOMAppendOrInsertBefore, wujieId } = opts;\n    const sandbox = getWujieById(wujieId);\n\n    const { styleSheetElements, replace, fetch, plugins, iframe, lifecycles, proxyLocation, fiber } = sandbox;\n\n    if (!isHijackingTag(element.tagName) || !wujieId) {\n      const res = rawDOMAppendOrInsertBefore.call(this, element, refChild) as T;\n      patchElementEffect(element, iframe.contentWindow);\n      execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n      return res;\n    }\n\n    const iframeDocument = iframe.contentDocument;\n    const curUrl = getCurUrl(proxyLocation);\n\n    // TODO \n    if (element.tagName) {\n      switch (element.tagName?.toUpperCase()) {\n        case \"LINK\": {\n          const { href, rel, type } = element as HTMLLinkElement;\n          const styleFlag = rel === \"stylesheet\" || type === \"text/css\" || href.endsWith(\".css\");\n          //  stylesheet \n          if (!styleFlag) {\n            const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n            execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n            return res;\n          }\n          // css\n          if (href && !isMatchUrl(href, getEffectLoaders(\"cssExcludes\", plugins))) {\n            getExternalStyleSheets(\n              [{ src: href, ignore: isMatchUrl(href, getEffectLoaders(\"cssIgnores\", plugins)) }],\n              fetch,\n              lifecycles.loadError\n            ).forEach(({ src, ignore, contentPromise }) =>\n              contentPromise.then(\n                (content) => {\n                  //  ignore \n                  const rawAttrs = parseTagAttributes(element.outerHTML);\n                  if (ignore && src) {\n                    // const stylesheetElement = iframeDocument.createElement(\"link\");\n                    // const attrs = {\n                    //   ...rawAttrs,\n                    //   type: \"text/css\",\n                    //   rel: \"stylesheet\",\n                    //   href: src,\n                    // };\n                    // setAttrsToElement(stylesheetElement, attrs);\n                    // rawDOMAppendOrInsertBefore.call(this, stylesheetElement, refChild);\n                    // manualInvokeElementEvent(element, \"load\");\n                    //  link  element \n                    rawDOMAppendOrInsertBefore.call(this, element, refChild);\n                  } else {\n                    // js\n                    const stylesheetElement = iframeDocument.createElement(\"style\");\n                    // css-loader\n                    const cssLoader = getCssLoader({ plugins, replace });\n                    stylesheetElement.innerHTML = cssLoader(content, src, curUrl);\n                    styleSheetElements.push(stylesheetElement);\n                    setAttrsToElement(stylesheetElement, rawAttrs);\n                    rawDOMAppendOrInsertBefore.call(this, stylesheetElement, refChild);\n                    // \n                    handleStylesheetElementPatch(stylesheetElement, sandbox);\n                    manualInvokeElementEvent(element, \"load\");\n                  }\n                  element = null;\n                },\n                () => {\n                  manualInvokeElementEvent(element, \"error\");\n                  element = null;\n                }\n              )\n            );\n          }\n\n          const comment = iframeDocument.createComment(`dynamic link ${href} replaced by wujie`);\n          return rawDOMAppendOrInsertBefore.call(this, comment, refChild);\n        }\n        case \"STYLE\": {\n          const stylesheetElement: HTMLStyleElement = newChild as any;\n          styleSheetElements.push(stylesheetElement);\n          const content = stylesheetElement.innerHTML;\n          const cssLoader = getCssLoader({ plugins, replace });\n          content && (stylesheetElement.innerHTML = cssLoader(content, \"\", curUrl));\n          const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n          // \n          patchStylesheetElement(stylesheetElement, cssLoader, sandbox, curUrl);\n          handleStylesheetElementPatch(stylesheetElement, sandbox);\n          execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n          return res;\n        }\n        case \"SCRIPT\": {\n          setTagToScript(element);\n          const { src, text, type, crossOrigin } = element as HTMLScriptElement;\n          // js\n          if (src && !isMatchUrl(src, getEffectLoaders(\"jsExcludes\", plugins))) {\n            const execScript = (scriptResult: ScriptObject) => {\n              // \n              if (sandbox.iframe === null) return warn(WUJIE_TIPS_REPEAT_RENDER);\n              const onload = () => {\n                manualInvokeElementEvent(element, \"load\");\n                element = null;\n              };\n              insertScriptToIframe({ ...scriptResult, onload }, sandbox.iframe.contentWindow, element);\n            };\n            const scriptOptions = {\n              src,\n              module: type === \"module\",\n              crossorigin: crossOrigin !== null,\n              crossoriginType: crossOrigin || \"\",\n              ignore: isMatchUrl(src, getEffectLoaders(\"jsIgnores\", plugins)),\n              attrs: parseTagAttributes(element.outerHTML),\n            } as ScriptObject;\n            getExternalScripts([scriptOptions], fetch, lifecycles.loadError, fiber).forEach((scriptResult) => {\n              dynamicScriptExecStack = dynamicScriptExecStack.then(() =>\n                scriptResult.contentPromise.then(\n                  (content) => {\n                    if (sandbox.execQueue === null) return warn(WUJIE_TIPS_REPEAT_RENDER);\n                    const execQueueLength = sandbox.execQueue?.length;\n                    sandbox.execQueue.push(() =>\n                      fiber\n                        ? sandbox.requestIdleCallback(() => {\n                            execScript({ ...scriptResult, content });\n                          })\n                        : execScript({ ...scriptResult, content })\n                    );\n                    // \n                    if (!execQueueLength) sandbox.execQueue.shift()();\n                  },\n                  () => {\n                    manualInvokeElementEvent(element, \"error\");\n                    element = null;\n                  }\n                )\n              );\n            });\n          } else {\n            const execQueueLength = sandbox.execQueue?.length;\n            sandbox.execQueue.push(() =>\n              fiber\n                ? sandbox.requestIdleCallback(() => {\n                    insertScriptToIframe(\n                      { src: null, content: text, attrs: parseTagAttributes(element.outerHTML) },\n                      sandbox.iframe.contentWindow,\n                      element\n                    );\n                  })\n                : insertScriptToIframe(\n                    { src: null, content: text, attrs: parseTagAttributes(element.outerHTML) },\n                    sandbox.iframe.contentWindow,\n                    element\n                  )\n            );\n            if (!execQueueLength) sandbox.execQueue.shift()();\n          }\n          // inline script never trigger the onload and onerror event\n          const comment = iframeDocument.createComment(`dynamic script ${src} replaced by wujie`);\n          return rawDOMAppendOrInsertBefore.call(this, comment, refChild);\n        }\n        // iframewindow.parent\n        case \"IFRAME\": {\n          // js-iframejs-iframe\n          if (element.getAttribute(WUJIE_DATA_FLAG) === \"\") {\n            return rawAppendChild.call(rawDocumentQuerySelector.call(this.ownerDocument, \"html\"), element);\n          }\n          const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n          execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n          return res;\n        }\n        default:\n      }\n    }\n  };\n}\n\nfunction findScriptElementFromIframe(rawElement: HTMLScriptElement, wujieId: string) {\n  const wujieTag = getTagFromScript(rawElement);\n  const sandbox = getWujieById(wujieId);\n  const { iframe } = sandbox;\n  const targetScript = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector(\n    `script[${WUJIE_SCRIPT_ID}='${wujieTag}']`\n  );\n  if (targetScript === null) {\n    warn(WUJIE_TIPS_NO_SCRIPT, `<script ${WUJIE_SCRIPT_ID}='${wujieTag}'/>`);\n  }\n  return { targetScript, iframe };\n}\n\nfunction rewriteContains(opts: { rawElementContains: (other: Node | null) => boolean; wujieId: string }) {\n  return function contains(other: Node | null) {\n    const element = other as HTMLElement;\n    const { rawElementContains, wujieId } = opts;\n    if (element && isScriptElement(element)) {\n      const { targetScript } = findScriptElementFromIframe(element as HTMLScriptElement, wujieId);\n      return targetScript !== null;\n    }\n    return rawElementContains(element);\n  };\n}\n\nfunction rewriteRemoveChild(opts: { rawElementRemoveChild: <T extends Node>(child: T) => T; wujieId: string }) {\n  return function removeChild(child: Node) {\n    const element = child as HTMLElement;\n    const { rawElementRemoveChild, wujieId } = opts;\n    if (element && isScriptElement(element)) {\n      const { targetScript, iframe } = findScriptElementFromIframe(element as HTMLScriptElement, wujieId);\n      if (targetScript !== null) {\n        return iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.removeChild(targetScript);\n      }\n      return null;\n    }\n    return rawElementRemoveChild(element);\n  };\n}\n\n/**\n * headbodyheadbody\n */\nfunction patchEventListener(element: HTMLHeadElement | HTMLBodyElement) {\n  const listenerMap = new Map<string, EventListenerOrEventListenerObject[]>();\n  element._cacheListeners = listenerMap;\n\n  element.addEventListener = (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ) => {\n    const listeners = listenerMap.get(type) || [];\n    listenerMap.set(type, [...listeners, listener]);\n    return rawAddEventListener.call(element, type, listener, options);\n  };\n\n  element.removeEventListener = (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ) => {\n    const typeListeners = listenerMap.get(type);\n    const index = typeListeners?.indexOf(listener);\n    if (typeListeners?.length && index !== -1) {\n      typeListeners.splice(index, 1);\n    }\n    return rawRemoveEventListener.call(element, type, listener, options);\n  };\n}\n\n/**\n * headbody\n */\nexport function removeEventListener(element: HTMLHeadElement | HTMLBodyElement) {\n  const listenerMap = element._cacheListeners;\n  [...listenerMap.entries()].forEach(([type, listeners]) => {\n    listeners.forEach((listener) => rawRemoveEventListener.call(element, type, listener));\n  });\n}\n\n/**\n * patch head and body in render\n * intercept appendChild and insertBefore\n */\nexport function patchRenderEffect(render: ShadowRoot | Document, id: string, degrade: boolean): void {\n  // domiframeiframe\n  if (!degrade) {\n    patchEventListener(render.head);\n    patchEventListener(render.body as HTMLBodyElement);\n  }\n\n  render.head.appendChild = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawAppendChild,\n    wujieId: id,\n  }) as typeof rawAppendChild;\n  render.head.insertBefore = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawHeadInsertBefore as any,\n    wujieId: id,\n  }) as typeof rawHeadInsertBefore;\n  render.head.removeChild = rewriteRemoveChild({\n    rawElementRemoveChild: rawElementRemoveChild.bind(render.head),\n    wujieId: id,\n  }) as typeof rawElementRemoveChild;\n  render.head.contains = rewriteContains({\n    rawElementContains: rawElementContains.bind(render.head),\n    wujieId: id,\n  }) as typeof rawElementContains;\n  render.contains = rewriteContains({\n    rawElementContains: rawElementContains.bind(render),\n    wujieId: id,\n  }) as typeof rawElementContains;\n  render.body.appendChild = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawAppendChild,\n    wujieId: id,\n  }) as typeof rawAppendChild;\n  render.body.insertBefore = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawBodyInsertBefore as any,\n    wujieId: id,\n  }) as typeof rawBodyInsertBefore;\n}\n","import {\n  WUJIE_APP_ID,\n  WUJIE_IFRAME_CLASS,\n  WUJIE_SHADE_STYLE,\n  CONTAINER_POSITION_DATA_FLAG,\n  CONTAINER_OVERFLOW_DATA_FLAG,\n  LOADING_DATA_FLAG,\n  WUJIE_LOADING_STYLE,\n  WUJIE_LOADING_SVG,\n} from \"./constant\";\nimport {\n  getWujieById,\n  rawAppendChild,\n  rawElementAppendChild,\n  rawElementRemoveChild,\n  relativeElementTagAttrMap,\n} from \"./common\";\nimport { getExternalStyleSheets } from \"./entry\";\nimport Wujie from \"./sandbox\";\nimport { patchElementEffect } from \"./iframe\";\nimport { patchRenderEffect } from \"./effect\";\nimport { getCssLoader, getPresetLoaders } from \"./plugin\";\nimport { getAbsolutePath, getContainer, getCurUrl, setAttrsToElement } from \"./utils\";\n\nconst cssSelectorMap = {\n  \":root\": \":host\",\n};\n\ndeclare global {\n  interface ShadowRoot {\n    head: HTMLHeadElement;\n    body: HTMLBodyElement;\n  }\n}\n\n/**\n *  wujie webComponentshadowdom\n */\nexport function defineWujieWebComponent() {\n  const customElements = window.customElements;\n  if (customElements && !customElements?.get(\"wujie-app\")) {\n    class WujieApp extends HTMLElement {\n      connectedCallback(): void {\n        if (this.shadowRoot) return;\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\n        const sandbox = getWujieById(this.getAttribute(WUJIE_APP_ID));\n        patchElementEffect(shadowRoot, sandbox.iframe.contentWindow);\n        sandbox.shadowRoot = shadowRoot;\n      }\n\n      disconnectedCallback(): void {\n        const sandbox = getWujieById(this.getAttribute(WUJIE_APP_ID));\n        sandbox?.unmount();\n      }\n    }\n    customElements?.define(\"wujie-app\", WujieApp);\n  }\n}\n\nexport function createWujieWebComponent(id: string): HTMLElement {\n  const contentElement = window.document.createElement(\"wujie-app\");\n  contentElement.setAttribute(WUJIE_APP_ID, id);\n  contentElement.classList.add(WUJIE_IFRAME_CLASS);\n  return contentElement;\n}\n\n/**\n * \n */\nexport function renderElementToContainer(\n  element: Element | ChildNode,\n  selectorOrElement: string | HTMLElement\n): HTMLElement {\n  const container = getContainer(selectorOrElement);\n  if (container && !container.contains(element)) {\n    //  loading \n    if (!container.querySelector(`div[${LOADING_DATA_FLAG}]`)) {\n      // \n      clearChild(container);\n    }\n    // \n    if (element) {\n      rawElementAppendChild.call(container, element);\n    }\n  }\n  return container;\n}\n\n/**\n * iframe\n */\nexport function initRenderIframeAndContainer(\n  id: string,\n  parent: string | HTMLElement,\n  degradeAttrs: { [key: string]: any } = {}\n): { iframe: HTMLIFrameElement; container: HTMLElement } {\n  const iframe = createIframeContainer(id, degradeAttrs);\n  const container = renderElementToContainer(iframe, parent);\n  const contentDocument = iframe.contentWindow.document;\n  contentDocument.open();\n  contentDocument.write(\"<!DOCTYPE html><html><head></head><body></body></html>\");\n  contentDocument.close();\n  return { iframe, container };\n}\n\n/**\n * css-before-loader  css-after-loader\n */\nasync function processCssLoaderForTemplate(sandbox: Wujie, html: HTMLHtmlElement): Promise<HTMLHtmlElement> {\n  const document = sandbox.iframe.contentDocument;\n  const { plugins, replace, proxyLocation } = sandbox;\n  const cssLoader = getCssLoader({ plugins, replace });\n  const cssBeforeLoaders = getPresetLoaders(\"cssBeforeLoaders\", plugins);\n  const cssAfterLoaders = getPresetLoaders(\"cssAfterLoaders\", plugins);\n  const curUrl = getCurUrl(proxyLocation);\n\n  return await Promise.all([\n    Promise.all(\n      getExternalStyleSheets(cssBeforeLoaders, sandbox.fetch, sandbox.lifecycles.loadError).map(\n        ({ src, contentPromise }) => contentPromise.then((content) => ({ src, content }))\n      )\n    ).then((contentList) => {\n      contentList.forEach(({ src, content }) => {\n        if (!content) return;\n        const styleElement = document.createElement(\"style\");\n        styleElement.setAttribute(\"type\", \"text/css\");\n        styleElement.appendChild(document.createTextNode(content ? cssLoader(content, src, curUrl) : content));\n        const head = html.querySelector(\"head\");\n        const body = html.querySelector(\"body\");\n        html.insertBefore(styleElement, head || body || html.firstChild);\n      });\n    }),\n    Promise.all(\n      getExternalStyleSheets(cssAfterLoaders, sandbox.fetch, sandbox.lifecycles.loadError).map(\n        ({ src, contentPromise }) => contentPromise.then((content) => ({ src, content }))\n      )\n    ).then((contentList) => {\n      contentList.forEach(({ src, content }) => {\n        if (!content) return;\n        const styleElement = document.createElement(\"style\");\n        styleElement.setAttribute(\"type\", \"text/css\");\n        styleElement.appendChild(document.createTextNode(content ? cssLoader(content, src, curUrl) : content));\n        html.appendChild(styleElement);\n      });\n    }),\n  ]).then(\n    () => html,\n    () => html\n  );\n}\n\n// htmlheadbody\nfunction replaceHeadAndBody(html: HTMLHtmlElement, head: HTMLHeadElement, body: HTMLBodyElement): HTMLHtmlElement {\n  const headElement = html.querySelector(\"head\");\n  const bodyElement = html.querySelector(\"body\");\n  if (headElement) {\n    while (headElement.firstChild) {\n      rawAppendChild.call(head, headElement.firstChild.cloneNode(true));\n      headElement.removeChild(headElement.firstChild);\n    }\n    headElement.parentNode.replaceChild(head, headElement);\n  }\n  if (bodyElement) {\n    while (bodyElement.firstChild) {\n      rawAppendChild.call(body, bodyElement.firstChild.cloneNode(true));\n      bodyElement.removeChild(bodyElement.firstChild);\n    }\n    bodyElement.parentNode.replaceChild(body, bodyElement);\n  }\n  return html;\n}\n\n/**\n * templatehtml\n */\nfunction renderTemplateToHtml(iframeWindow: Window, template: string): HTMLHtmlElement {\n  const sandbox = iframeWindow.__WUJIE;\n  const { head, body, alive, execFlag } = sandbox;\n  const document = iframeWindow.document;\n  const parser = new DOMParser();\n  const parsedDocument = parser.parseFromString(template, \"text/html\");\n\n  //  template htmldocumentElement  HTMLHtmlElement\n  const parsedHtml = parsedDocument.documentElement as HTMLHtmlElement;\n  const sourceAttributes = parsedHtml.attributes;\n  let html = document.createElement(\"html\");\n  html.innerHTML = template;\n  for (let i = 0; i < sourceAttributes.length; i++) {\n    html.setAttribute(sourceAttributes[i].name, sourceAttributes[i].value);\n  }\n  // headbody\n  if (!alive && execFlag) {\n    html = replaceHeadAndBody(html, head, body);\n  } else {\n    sandbox.head = html.querySelector(\"head\");\n    sandbox.body = html.querySelector(\"body\");\n  }\n  const ElementIterator = document.createTreeWalker(html, NodeFilter.SHOW_ELEMENT, null, false);\n  let nextElement = ElementIterator.currentNode as HTMLElement;\n  while (nextElement) {\n    patchElementEffect(nextElement, iframeWindow);\n    const relativeAttr = relativeElementTagAttrMap[nextElement.tagName];\n    const url = nextElement[relativeAttr];\n    if (relativeAttr) nextElement.setAttribute(relativeAttr, getAbsolutePath(url, nextElement.baseURI || \"\"));\n    nextElement = ElementIterator.nextNode() as HTMLElement;\n  }\n  if (!html.querySelector(\"head\")) {\n    const head = document.createElement(\"head\");\n    html.appendChild(head);\n  }\n  if (!html.querySelector(\"body\")) {\n    const body = document.createElement(\"body\");\n    html.appendChild(body);\n  }\n  return html;\n}\n\n/**\n * templateshadowRoot\n */\nexport async function renderTemplateToShadowRoot(\n  shadowRoot: ShadowRoot,\n  iframeWindow: Window,\n  template: string\n): Promise<void> {\n  const html = renderTemplateToHtml(iframeWindow, template);\n  //  css-before-loader  css-after-loader\n  const processedHtml = await processCssLoaderForTemplate(iframeWindow.__WUJIE, html);\n  // change ownerDocument\n  shadowRoot.appendChild(processedHtml);\n  const shade = document.createElement(\"div\");\n  shade.setAttribute(\"style\", WUJIE_SHADE_STYLE);\n  processedHtml.insertBefore(shade, processedHtml.firstChild);\n  shadowRoot.head = shadowRoot.querySelector(\"head\");\n  shadowRoot.body = shadowRoot.querySelector(\"body\");\n\n  //  html parentNode\n  Object.defineProperty(shadowRoot.firstChild, \"parentNode\", {\n    enumerable: true,\n    configurable: true,\n    get: () => iframeWindow.document,\n  });\n\n  patchRenderEffect(shadowRoot, iframeWindow.__WUJIE.id, false);\n}\n\nexport function createIframeContainer(id: string, degradeAttrs: { [key: string]: any } = {}): HTMLIFrameElement {\n  const iframe = document.createElement(\"iframe\");\n  const defaultStyle = \"height:100%;width:100%\";\n  setAttrsToElement(iframe, {\n    ...degradeAttrs,\n    style: [defaultStyle, degradeAttrs.style].join(\";\"),\n    [WUJIE_APP_ID]: id,\n  });\n  return iframe;\n}\n\n/**\n * templateiframe\n */\nexport async function renderTemplateToIframe(\n  renderDocument: Document,\n  iframeWindow: Window,\n  template: string\n): Promise<void> {\n  // template\n  const html = renderTemplateToHtml(iframeWindow, template);\n  //  css-before-loader  css-after-loader\n  const processedHtml = await processCssLoaderForTemplate(iframeWindow.__WUJIE, html);\n  renderDocument.replaceChild(processedHtml, renderDocument.documentElement);\n\n  //  html parentNode\n  Object.defineProperty(renderDocument.documentElement, \"parentNode\", {\n    enumerable: true,\n    configurable: true,\n    get: () => iframeWindow.document,\n  });\n\n  patchRenderEffect(renderDocument, iframeWindow.__WUJIE.id, true);\n}\n\n/**\n * Element\n */\nexport function clearChild(root: ShadowRoot | Node): void {\n  // \n  while (root?.firstChild) {\n    rawElementRemoveChild.call(root, root.firstChild);\n  }\n}\n\n/**\n * loading\n */\nexport function addLoading(el: string | HTMLElement, loading: HTMLElement): void {\n  const container = getContainer(el);\n  clearChild(container);\n  //  loading \n  let containerStyles = null;\n  try {\n    containerStyles = window.getComputedStyle(container);\n  } catch {\n    return;\n  }\n  if (containerStyles.position === \"static\") {\n    container.setAttribute(CONTAINER_POSITION_DATA_FLAG, containerStyles.position);\n    container.setAttribute(\n      CONTAINER_OVERFLOW_DATA_FLAG,\n      containerStyles.overflow === \"visible\" ? \"\" : containerStyles.overflow\n    );\n    container.style.setProperty(\"position\", \"relative\");\n    container.style.setProperty(\"overflow\", \"hidden\");\n  } else if ([\"relative\", \"sticky\"].includes(containerStyles.position)) {\n    container.setAttribute(\n      CONTAINER_OVERFLOW_DATA_FLAG,\n      containerStyles.overflow === \"visible\" ? \"\" : containerStyles.overflow\n    );\n    container.style.setProperty(\"overflow\", \"hidden\");\n  }\n  const loadingContainer = document.createElement(\"div\");\n  loadingContainer.setAttribute(LOADING_DATA_FLAG, \"\");\n  loadingContainer.setAttribute(\"style\", WUJIE_LOADING_STYLE);\n  if (loading) loadingContainer.appendChild(loading);\n  else loadingContainer.innerHTML = WUJIE_LOADING_SVG;\n  container.appendChild(loadingContainer);\n}\n/**\n * loading\n */\nexport function removeLoading(el: HTMLElement): void {\n  // \n  const positionFlag = el.getAttribute(CONTAINER_POSITION_DATA_FLAG);\n  const overflowFlag = el.getAttribute(CONTAINER_OVERFLOW_DATA_FLAG);\n  if (positionFlag) el.style.removeProperty(\"position\");\n  if (overflowFlag !== null) {\n    overflowFlag ? el.style.setProperty(\"overflow\", overflowFlag) : el.style.removeProperty(\"overflow\");\n  }\n  el.removeAttribute(CONTAINER_POSITION_DATA_FLAG);\n  el.removeAttribute(CONTAINER_OVERFLOW_DATA_FLAG);\n  const loadingContainer = el.querySelector(`div[${LOADING_DATA_FLAG}]`);\n  loadingContainer && el.removeChild(loadingContainer);\n}\n/**\n * \n * rootfont-face\n */\nexport function getPatchStyleElements(rootStyleSheets: Array<CSSStyleSheet>): Array<HTMLStyleElement | null> {\n  const rootCssRules = [];\n  const fontCssRules = [];\n  const rootStyleReg = /:root/g;\n\n  // rootcssRules\n  for (let i = 0; i < rootStyleSheets.length; i++) {\n    const cssRules = rootStyleSheets[i]?.cssRules ?? [];\n    for (let j = 0; j < cssRules.length; j++) {\n      const cssRuleText = cssRules[j].cssText;\n      // rootcssRule\n      if (rootStyleReg.test(cssRuleText)) {\n        rootCssRules.push(cssRuleText.replace(rootStyleReg, (match) => cssSelectorMap[match]));\n      }\n      // font-facecssRule\n      if (cssRules[j].type === CSSRule.FONT_FACE_RULE) {\n        fontCssRules.push(cssRuleText);\n      }\n    }\n  }\n\n  let rootStyleSheetElement = null;\n  let fontStyleSheetElement = null;\n\n  // host\n  if (rootCssRules.length) {\n    rootStyleSheetElement = window.document.createElement(\"style\");\n    rootStyleSheetElement.innerHTML = rootCssRules.join(\"\");\n  }\n\n  if (fontCssRules.length) {\n    fontStyleSheetElement = window.document.createElement(\"style\");\n    fontStyleSheetElement.innerHTML = fontCssRules.join(\"\");\n  }\n\n  return [rootStyleSheetElement, fontStyleSheetElement];\n}\n","import { anchorElementGenerator, getAnchorElementQueryMap, getSyncUrl, appRouteParse, getDegradeIframe } from \"./utils\";\nimport { renderIframeReplaceApp, patchEventTimeStamp } from \"./iframe\";\nimport { renderElementToContainer, initRenderIframeAndContainer } from \"./shadow\";\nimport { getWujieById, rawDocumentQuerySelector } from \"./common\";\n\n/**\n * \n */\nexport function syncUrlToWindow(iframeWindow: Window): void {\n  const { sync, id, prefix } = iframeWindow.__WUJIE;\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  // urlid\n  if (!sync && !queryMap[id]) return (winUrlElement = null);\n  const curUrl = iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n  let validShortPath = \"\";\n  // \n  if (prefix) {\n    Object.keys(prefix).forEach((shortPath) => {\n      const longPath = prefix[shortPath];\n      // \n      if (curUrl.startsWith(longPath) && (!validShortPath || longPath.length > prefix[validShortPath].length)) {\n        validShortPath = shortPath;\n      }\n    });\n  }\n  // \n  if (sync) {\n    queryMap[id] = window.encodeURIComponent(\n      validShortPath ? curUrl.replace(prefix[validShortPath], `{${validShortPath}}`) : curUrl\n    );\n    // \n  } else {\n    delete queryMap[id];\n  }\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  if (winUrlElement.href !== window.location.href) {\n    window.history.replaceState(null, \"\", winUrlElement.href);\n  }\n  winUrlElement = null;\n}\n\n/**\n * \n */\nexport function syncUrlToIframe(iframeWindow: Window): void {\n  // \n  const { pathname, search, hash } = iframeWindow.location;\n  const { id, url, sync, execFlag, prefix, inject } = iframeWindow.__WUJIE;\n\n  // \n  const idUrl = sync && !execFlag ? getSyncUrl(id, prefix) : url;\n  // href\n  const syncUrl = (/^http/.test(idUrl) ? null : idUrl) || url;\n  const { appRoutePath } = appRouteParse(syncUrl);\n\n  const preAppRoutePath = pathname + search + hash;\n  if (preAppRoutePath !== appRoutePath) {\n    iframeWindow.history.replaceState(null, \"\", inject.mainHostPath + appRoutePath);\n  }\n}\n\n/**\n * \n * hash\n */\nexport function clearInactiveAppUrl(): void {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  Object.keys(queryMap).forEach((id) => {\n    const sandbox = getWujieById(id);\n    if (!sandbox) return;\n    // \n    if (sandbox.execFlag && sandbox.sync && !sandbox.hrefFlag && !sandbox.activeFlag) {\n      delete queryMap[id];\n    }\n  });\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + window.decodeURIComponent(queryMap[key]))\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  if (winUrlElement.href !== window.location.href) {\n    window.history.replaceState(null, \"\", winUrlElement.href);\n  }\n  winUrlElement = null;\n}\n\n/**\n * url\n */\nexport function pushUrlToWindow(id: string, url: string): void {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  queryMap[id] = window.encodeURIComponent(url);\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  window.history.pushState(null, \"\", winUrlElement.href);\n  winUrlElement = null;\n}\n\n/**\n * (window.location.href)\n */\nexport function processAppForHrefJump(): void {\n  window.addEventListener(\"popstate\", () => {\n    let winUrlElement = anchorElementGenerator(window.location.href);\n    const queryMap = getAnchorElementQueryMap(winUrlElement);\n    winUrlElement = null;\n    Object.keys(queryMap)\n      .map((id) => getWujieById(id))\n      .filter((sandbox) => sandbox)\n      .forEach((sandbox) => {\n        const url = queryMap[sandbox.id];\n        const iframeBody = rawDocumentQuerySelector.call(sandbox.iframe.contentDocument, \"body\");\n        // href\n        if (/http/.test(url)) {\n          if (sandbox.degrade) {\n            renderElementToContainer(sandbox.document.documentElement, iframeBody);\n            renderIframeReplaceApp(\n              window.decodeURIComponent(url),\n              getDegradeIframe(sandbox.id).parentElement,\n              sandbox.degradeAttrs\n            );\n          } else\n            renderIframeReplaceApp(\n              window.decodeURIComponent(url),\n              sandbox.shadowRoot.host.parentElement,\n              sandbox.degradeAttrs\n            );\n          sandbox.hrefFlag = true;\n          // href\n        } else if (sandbox.hrefFlag) {\n          if (sandbox.degrade) {\n            // \n            const { iframe } = initRenderIframeAndContainer(sandbox.id, sandbox.el, sandbox.degradeAttrs);\n            patchEventTimeStamp(iframe.contentWindow, sandbox.iframe.contentWindow);\n            iframe.contentWindow.onunload = () => {\n              sandbox.unmount();\n            };\n            iframe.contentDocument.appendChild(iframeBody.firstElementChild);\n            sandbox.document = iframe.contentDocument;\n          } else renderElementToContainer(sandbox.shadowRoot.host, sandbox.el);\n          sandbox.hrefFlag = false;\n        }\n      });\n  });\n}\n","import WuJie from \"./sandbox\";\nimport { ScriptObject } from \"./template\";\nimport { renderElementToContainer } from \"./shadow\";\nimport { syncUrlToWindow } from \"./sync\";\nimport {\n  fixElementCtrSrcOrHref,\n  isConstructable,\n  anchorElementGenerator,\n  isMatchSyncQueryById,\n  isFunction,\n  warn,\n  error,\n  execHooks,\n  getCurUrl,\n  getAbsolutePath,\n  setAttrsToElement,\n  setTagToScript,\n  getTagFromScript,\n} from \"./utils\";\nimport {\n  documentProxyProperties,\n  rawAddEventListener,\n  rawRemoveEventListener,\n  rawDocumentQuerySelector,\n  mainDocumentAddEventListenerEvents,\n  mainAndAppAddEventListenerEvents,\n  appDocumentAddEventListenerEvents,\n  appDocumentOnEvents,\n  appWindowAddEventListenerEvents,\n  appWindowOnEvent,\n  windowProxyProperties,\n  windowRegWhiteList,\n  rawWindowAddEventListener,\n  rawWindowRemoveEventListener,\n} from \"./common\";\nimport type { appAddEventListenerOptions } from \"./common\";\nimport { getJsLoader } from \"./plugin\";\nimport { WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, WUJIE_DATA_FLAG } from \"./constant\";\nimport { ScriptObjectLoader } from \"./index\";\n\ndeclare global {\n  interface Window {\n    // \n    __POWERED_BY_WUJIE__?: boolean;\n    // \n    __WUJIE_PUBLIC_PATH__: string;\n    // querySelector\n    __WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__: typeof Document.prototype.querySelector;\n\n    // iframecreateElement\n    __WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__: typeof Document.prototype.createElement;\n\n    // iframecreateTextNode\n    __WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__: typeof Document.prototype.createTextNode;\n\n    // iframehead\n    __WUJIE_RAW_DOCUMENT_HEAD__: typeof Document.prototype.head;\n\n    // querySelector\n    __WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__: typeof Document.prototype.querySelectorAll;\n    // window\n    __WUJIE_RAW_WINDOW__: Window;\n    // \n    __WUJIE: WuJie;\n    // \n    __WUJIE_INJECT: WuJie[\"inject\"];\n    // \n    __WUJIE_EVENTLISTENER__: Set<{ listener: EventListenerOrEventListenerObject; type: string; options: any }>;\n    // mount\n    __WUJIE_MOUNT: () => void;\n    // unmount\n    __WUJIE_UNMOUNT: () => void | Promise<void>;\n    // document type\n    Document: typeof Document;\n    // img type\n    HTMLImageElement: typeof HTMLImageElement;\n    // node type\n    Node: typeof Node;\n    // element type\n    Element: typeof Element;\n    // htmlElement typeof\n    HTMLElement: typeof HTMLElement;\n    // anchor type\n    HTMLAnchorElement: typeof HTMLAnchorElement;\n    // source type\n    HTMLSourceElement: typeof HTMLSourceElement;\n    // link type\n    HTMLLinkElement: typeof HTMLLinkElement;\n    // script type\n    HTMLScriptElement: typeof HTMLScriptElement;\n    // media type\n    HTMLMediaElement: typeof HTMLMediaElement;\n    EventTarget: typeof EventTarget;\n    Event: typeof Event;\n    ShadowRoot: typeof ShadowRoot;\n    // \n    $wujie: { [key: string]: any };\n  }\n  interface HTMLHeadElement {\n    _cacheListeners: Map<string, EventListenerOrEventListenerObject[]>;\n  }\n  interface HTMLBodyElement {\n    _cacheListeners: Map<string, EventListenerOrEventListenerObject[]>;\n  }\n  interface Document {\n    createTreeWalker(\n      root: Node,\n      whatToShow?: number,\n      filter?: NodeFilter | null,\n      entityReferenceExpansion?: boolean\n    ): TreeWalker;\n  }\n}\n\n/**\n * windowiframe\n */\nfunction patchIframeEvents(iframeWindow: Window) {\n  iframeWindow.__WUJIE_EVENTLISTENER__ = iframeWindow.__WUJIE_EVENTLISTENER__ || new Set();\n  iframeWindow.addEventListener = function addEventListener<K extends keyof WindowEventMap>(\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    options?: boolean | appAddEventListenerOptions\n  ) {\n    // \n    execHooks(iframeWindow.__WUJIE.plugins, \"windowAddEventListenerHook\", iframeWindow, type, listener, options);\n    //  addEventListener set\n    iframeWindow.__WUJIE_EVENTLISTENER__.add({ type, listener, options });\n    if (appWindowAddEventListenerEvents.includes(type) || (typeof options === \"object\" && options.targetWindow)) {\n      const targetWindow = typeof options === \"object\" && options.targetWindow ? options?.targetWindow : iframeWindow;\n      return rawWindowAddEventListener.call(targetWindow, type, listener, options);\n    }\n    // window.windowwindow\n    rawWindowAddEventListener.call(window.__WUJIE_RAW_WINDOW__ || window, type, listener, options);\n  };\n\n  iframeWindow.removeEventListener = function removeEventListener<K extends keyof WindowEventMap>(\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    options?: boolean | appAddEventListenerOptions\n  ) {\n    // \n    execHooks(iframeWindow.__WUJIE.plugins, \"windowRemoveEventListenerHook\", iframeWindow, type, listener, options);\n    iframeWindow.__WUJIE_EVENTLISTENER__.forEach((o) => {\n      // \n      if (o.listener === listener && o.type === type && options == o.options) {\n        iframeWindow.__WUJIE_EVENTLISTENER__.delete(o);\n      }\n    });\n    if (appWindowAddEventListenerEvents.includes(type) || (typeof options === \"object\" && options.targetWindow)) {\n      const targetWindow = typeof options === \"object\" && options.targetWindow ? options?.targetWindow : iframeWindow;\n      return rawWindowRemoveEventListener.call(targetWindow, type, listener, options);\n    }\n    rawWindowRemoveEventListener.call(window.__WUJIE_RAW_WINDOW__ || window, type, listener, options);\n  };\n}\n\nfunction patchIframeVariable(iframeWindow: Window, wujie: WuJie, appHostPath: string): void {\n  iframeWindow.__WUJIE = wujie;\n  iframeWindow.__WUJIE_PUBLIC_PATH__ = appHostPath + \"/\";\n  iframeWindow.$wujie = wujie.provide;\n  iframeWindow.__WUJIE_RAW_WINDOW__ = iframeWindow;\n}\n\n/**\n * iframehistorypushStatereplaceState\n * location\n * \n * @param iframeWindow\n * @param appHostPath  host path\n * @param mainHostPath  host path\n */\nfunction patchIframeHistory(iframeWindow: Window, appHostPath: string, mainHostPath: string): void {\n  const history = iframeWindow.history;\n  const rawHistoryPushState = history.pushState;\n  const rawHistoryReplaceState = history.replaceState;\n  history.pushState = function (data: any, title: string, url?: string): void {\n    const baseUrl =\n      mainHostPath + iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n    const mainUrl = getAbsolutePath(url?.replace(appHostPath, \"\"), baseUrl);\n    const ignoreFlag = url === undefined;\n\n    rawHistoryPushState.call(history, data, title, ignoreFlag ? undefined : mainUrl);\n    if (ignoreFlag) return;\n    updateBase(iframeWindow, appHostPath, mainHostPath);\n    syncUrlToWindow(iframeWindow);\n  };\n  history.replaceState = function (data: any, title: string, url?: string): void {\n    const baseUrl =\n      mainHostPath + iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n    const mainUrl = getAbsolutePath(url?.replace(appHostPath, \"\"), baseUrl);\n    const ignoreFlag = url === undefined;\n\n    rawHistoryReplaceState.call(history, data, title, ignoreFlag ? undefined : mainUrl);\n    if (ignoreFlag) return;\n    updateBase(iframeWindow, appHostPath, mainHostPath);\n    syncUrlToWindow(iframeWindow);\n  };\n}\n\n/**\n * iframebase\n * @param iframeWindow\n * @param appHostPath\n * @param mainHostPath\n */\nfunction updateBase(iframeWindow: Window, appHostPath: string, mainHostPath: string) {\n  const baseUrl = new URL(iframeWindow.location.href?.replace(mainHostPath, \"\"), appHostPath);\n  const baseElement = rawDocumentQuerySelector.call(iframeWindow.document, \"base\");\n  if (baseElement) baseElement.setAttribute(\"href\", appHostPath + baseUrl.pathname);\n}\n\n/**\n * patch iframe window effect\n * @param iframeWindow\n */\n// TODO \nfunction patchWindowEffect(iframeWindow: Window): void {\n  // \n  function processWindowProperty(key: string): boolean {\n    const value = iframeWindow[key];\n    try {\n      if (typeof value === \"function\" && !isConstructable(value)) {\n        iframeWindow[key] = window[key].bind(window);\n      } else {\n        iframeWindow[key] = window[key];\n      }\n      return true;\n    } catch (e) {\n      warn(e.message);\n      return false;\n    }\n  }\n  Object.getOwnPropertyNames(iframeWindow).forEach((key) => {\n    // \n    if (key === \"getSelection\") {\n      Object.defineProperty(iframeWindow, key, {\n        get: () => iframeWindow.document[key],\n      });\n      return;\n    }\n    // \n    if (windowProxyProperties.includes(key)) {\n      processWindowProperty(key);\n      return;\n    }\n    // \n    windowRegWhiteList.some((reg) => {\n      if (reg.test(key) && key in iframeWindow.parent) {\n        return processWindowProperty(key);\n      }\n      return false;\n    });\n  });\n  // onEvent set\n  const windowOnEvents = Object.getOwnPropertyNames(window)\n    .filter((p) => /^on/.test(p))\n    .filter((e) => !appWindowOnEvent.includes(e));\n\n  // window\n  windowOnEvents.forEach((e) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow, e) || {\n      enumerable: true,\n      writable: true,\n    };\n    try {\n      Object.defineProperty(iframeWindow, e, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => window[e],\n        set:\n          descriptor.writable || descriptor.set\n            ? (handler) => {\n                window[e] = typeof handler === \"function\" ? handler.bind(iframeWindow) : handler;\n              }\n            : undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // \n  execHooks(iframeWindow.__WUJIE.plugins, \"windowPropertyOverride\", iframeWindow);\n}\n\n/**\n * \n */\nfunction recordEventListeners(iframeWindow: Window) {\n  const sandbox = iframeWindow.__WUJIE;\n  iframeWindow.Node.prototype.addEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    // \n    const elementListenerList = sandbox.elementEventCacheMap.get(this);\n    if (elementListenerList) {\n      if (!elementListenerList.find((listener) => listener.type === type && listener.handler === handler)) {\n        elementListenerList.push({ type, handler, options });\n      }\n    } else sandbox.elementEventCacheMap.set(this, [{ type, handler, options }]);\n    return rawAddEventListener.call(this, type, handler, options);\n  };\n\n  iframeWindow.Node.prototype.removeEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions\n  ): void {\n    // \n    const elementListenerList = sandbox.elementEventCacheMap.get(this);\n    if (elementListenerList) {\n      const index = elementListenerList?.findIndex((ele) => ele.type === type && ele.handler === handler);\n      elementListenerList.splice(index, 1);\n    }\n    if (!elementListenerList?.length) {\n      sandbox.elementEventCacheMap.delete(this);\n    }\n    return rawRemoveEventListener.call(this, type, handler, options);\n  };\n}\n\n/**\n * \n */\nexport function recoverEventListeners(rootElement: Element | ChildNode, iframeWindow: Window) {\n  const sandbox = iframeWindow.__WUJIE;\n  const elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n  const ElementIterator = document.createTreeWalker(rootElement, NodeFilter.SHOW_ELEMENT, null, false);\n  let nextElement = ElementIterator.currentNode;\n  while (nextElement) {\n    const elementListenerList = sandbox.elementEventCacheMap.get(nextElement);\n    if (elementListenerList?.length) {\n      elementEventCacheMap.set(nextElement, elementListenerList);\n      elementListenerList.forEach((listener) => {\n        nextElement.addEventListener(listener.type, listener.handler, listener.options);\n      });\n    }\n    nextElement = ElementIterator.nextNode() as HTMLElement;\n  }\n  sandbox.elementEventCacheMap = elementEventCacheMap;\n}\n\n/**\n * \n */\nexport function recoverDocumentListeners(\n  oldRootElement: Element | ChildNode,\n  newRootElement: Element | ChildNode,\n  iframeWindow: Window\n) {\n  const sandbox = iframeWindow.__WUJIE;\n  const elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n  const elementListenerList = sandbox.elementEventCacheMap.get(oldRootElement);\n  if (elementListenerList?.length) {\n    elementEventCacheMap.set(newRootElement, elementListenerList);\n    elementListenerList.forEach((listener) => {\n      newRootElement.addEventListener(listener.type, listener.handler, listener.options);\n    });\n  }\n  sandbox.elementEventCacheMap = elementEventCacheMap;\n}\n\n/**\n * vuee.timeStamp < attachedTimestamp \n */\nexport function patchEventTimeStamp(targetWindow: Window, iframeWindow: Window) {\n  Object.defineProperty(targetWindow.Event.prototype, \"timeStamp\", {\n    get: () => {\n      return iframeWindow.document.createEvent(\"Event\").timeStamp;\n    },\n  });\n}\n\n/**\n * patch document effect\n * @param iframeWindow\n */\n// TODO \nfunction patchDocumentEffect(iframeWindow: Window): void {\n  const sandbox = iframeWindow.__WUJIE;\n\n  /**\n   *  addEventListenerremoveEventListener\n   *  handler thishandler.bind(document)\n   * removeEventListenerhandler => handler.bind(document)\n   * callback = handler.bind(document) removeEventListener\n   */\n  const handlerCallbackMap: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject> =\n    new WeakMap();\n  const handlerTypeMap: WeakMap<EventListenerOrEventListenerObject, Array<string>> = new WeakMap();\n  iframeWindow.Document.prototype.addEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    if (!handler) return;\n    let callback = handlerCallbackMap.get(handler);\n    const typeList = handlerTypeMap.get(handler);\n    //  handlerCallbackMap\n    if (!callback) {\n      callback = typeof handler === \"function\" ? handler.bind(this) : handler;\n      handlerCallbackMap.set(handler, callback);\n    }\n    //  handlerTypeMap\n    if (typeList) {\n      if (!typeList.includes(type)) typeList.push(type);\n    } else {\n      handlerTypeMap.set(handler, [type]);\n    }\n\n    // \n    execHooks(iframeWindow.__WUJIE.plugins, \"documentAddEventListenerHook\", iframeWindow, type, callback, options);\n    if (appDocumentAddEventListenerEvents.includes(type)) {\n      return rawAddEventListener.call(this, type, callback, options);\n    }\n    //  sandbox.document\n    if (sandbox.degrade) return sandbox.document.addEventListener(type, callback, options);\n    if (mainDocumentAddEventListenerEvents.includes(type))\n      return window.document.addEventListener(type, callback, options);\n    if (mainAndAppAddEventListenerEvents.includes(type)) {\n      window.document.addEventListener(type, callback, options);\n      sandbox.shadowRoot.addEventListener(type, callback, options);\n      return;\n    }\n    sandbox.shadowRoot.addEventListener(type, callback, options);\n  };\n  iframeWindow.Document.prototype.removeEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    const callback: EventListenerOrEventListenerObject = handlerCallbackMap.get(handler);\n    const typeList = handlerTypeMap.get(handler);\n    if (callback) {\n      if (typeList?.includes(type)) {\n        typeList.splice(typeList.indexOf(type), 1);\n        if (!typeList.length) {\n          handlerCallbackMap.delete(handler);\n          handlerTypeMap.delete(handler);\n        }\n      }\n\n      // \n      execHooks(iframeWindow.__WUJIE.plugins, \"documentRemoveEventListenerHook\", iframeWindow, type, callback, options);\n      if (appDocumentAddEventListenerEvents.includes(type)) {\n        return rawRemoveEventListener.call(this, type, callback, options);\n      }\n      if (sandbox.degrade) return sandbox.document.removeEventListener(type, callback, options);\n      if (mainDocumentAddEventListenerEvents.includes(type)) {\n        return window.document.removeEventListener(type, callback, options);\n      }\n      if (mainAndAppAddEventListenerEvents.includes(type)) {\n        window.document.removeEventListener(type, callback, options);\n        sandbox.shadowRoot.removeEventListener(type, callback, options);\n        return;\n      }\n      sandbox.shadowRoot.removeEventListener(type, callback, options);\n    }\n  };\n  // onEvent\n  const elementOnEvents = Object.keys(iframeWindow.HTMLElement.prototype).filter((ele) => /^on/.test(ele));\n  const documentOnEvent = Object.keys(iframeWindow.Document.prototype)\n    .filter((ele) => /^on/.test(ele))\n    .filter((ele) => !appDocumentOnEvents.includes(ele));\n  elementOnEvents\n    .filter((e) => documentOnEvent.includes(e))\n    .forEach((e) => {\n      const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, e) || {\n        enumerable: true,\n        writable: true,\n      };\n      try {\n        Object.defineProperty(iframeWindow.Document.prototype, e, {\n          enumerable: descriptor.enumerable,\n          configurable: true,\n          get: () => (sandbox.degrade ? sandbox.document[e] : sandbox.shadowRoot.firstElementChild[e]),\n          set:\n            descriptor.writable || descriptor.set\n              ? (handler) => {\n                  const val = typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler;\n                  sandbox.degrade ? (sandbox.document[e] = val) : (sandbox.shadowRoot.firstElementChild[e] = val);\n                }\n              : undefined,\n        });\n      } catch (e) {\n        warn(e.message);\n      }\n    });\n  // get\n  const {\n    ownerProperties,\n    modifyProperties,\n    shadowProperties,\n    shadowMethods,\n    documentProperties,\n    documentMethods,\n    documentEvents,\n  } = documentProxyProperties;\n  modifyProperties.concat(shadowProperties, shadowMethods, documentProperties, documentMethods).forEach((propKey) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, propKey) || {\n      enumerable: true,\n      writable: true,\n    };\n    try {\n      Object.defineProperty(iframeWindow.Document.prototype, propKey, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => sandbox.proxyDocument[propKey],\n        set: undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // document\n  // TODO \n  documentEvents.forEach((propKey) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, propKey) || {\n      enumerable: true,\n      writable: true,\n    };\n    //getsetiframeWindow.document[propKey]handleriframeWindow.document[propKey]handler\n    try {\n      Object.defineProperty(iframeWindow.Document.prototype, propKey, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => (sandbox.degrade ? sandbox : window).document[propKey],\n        // handler\n        set:\n          descriptor.writable || descriptor.set\n            ? (handler) => {\n                // (sandbox.degrade ? sandbox : window).document[propKey] =\n                //   typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler;\n                (sandbox.degrade ? sandbox : window).document.removeEventListener(\n                  propKey,\n                  handlerCallbackMap.get(handler)\n                );\n                // \n                (sandbox.degrade ? sandbox : window).document.addEventListener(\n                  propKey,\n                  typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler\n                );\n                // \n                handlerCallbackMap.set(handler, handler.bind(iframeWindow.document));\n              }\n            : undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // process owner property\n  ownerProperties.forEach((propKey) => {\n    Object.defineProperty(iframeWindow.document, propKey, {\n      enumerable: true,\n      configurable: true,\n      get: () => sandbox.proxyDocument[propKey],\n      set: undefined,\n    });\n  });\n  // \n  execHooks(iframeWindow.__WUJIE.plugins, \"documentPropertyOverride\", iframeWindow);\n}\n\n/**\n * patch Node effect\n * 1 getRootNode\n * 2 appendChildinsertBefore svg createElement  patch  patch\n * @param iframeWindow\n */\nfunction patchNodeEffect(iframeWindow: Window): void {\n  const rawGetRootNode = iframeWindow.Node.prototype.getRootNode;\n  const rawAppendChild = iframeWindow.Node.prototype.appendChild;\n  const rawInsertRule = iframeWindow.Node.prototype.insertBefore;\n  const rawRemoveChild = iframeWindow.Node.prototype.removeChild;\n  iframeWindow.Node.prototype.getRootNode = function (options?: GetRootNodeOptions): Node {\n    const rootNode = rawGetRootNode.call(this, options);\n    if (rootNode === iframeWindow.__WUJIE.shadowRoot) return iframeWindow.document;\n    else return rootNode;\n  };\n  iframeWindow.Node.prototype.appendChild = function <T extends Node>(node: T): T {\n    const res = rawAppendChild.call(this, node);\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n  iframeWindow.Node.prototype.insertBefore = function <T extends Node>(node: T, child: Node | null): T {\n    const res = rawInsertRule.call(this, node, child);\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n  iframeWindow.Node.prototype.removeChild = function <T extends Node>(node: T): T {\n    let res;\n    try {\n      res = rawRemoveChild.call(this, node);\n    } catch (e) {\n      console.warn(\n        `Failed to removeChild: ${node.nodeName.toLowerCase()} is not a child of ${this.nodeName.toLowerCase()}, try again with parentNode attribute. `\n      );\n      if (node.isConnected && isFunction(node.parentNode?.removeChild)) {\n        node.parentNode.removeChild(node);\n      }\n    }\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n}\n\n/**\n * \n * @param iframeWindow\n */\nfunction patchRelativeUrlEffect(iframeWindow: Window): void {\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLImageElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLAnchorElement, \"href\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLSourceElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLLinkElement, \"href\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLScriptElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLMediaElement, \"src\");\n}\n\n/**\n * base\n */\nexport function initBase(iframeWindow: Window, url: string): void {\n  const iframeDocument = iframeWindow.document;\n  const baseElement = iframeDocument.createElement(\"base\");\n  const iframeUrlElement = anchorElementGenerator(iframeWindow.location.href);\n  const appUrlElement = anchorElementGenerator(url);\n  baseElement.setAttribute(\"href\", appUrlElement.protocol + \"//\" + appUrlElement.host + iframeUrlElement.pathname);\n  iframeDocument.head.appendChild(baseElement);\n}\n\n/**\n * iframedom\n * @param iframeWindow\n * @param wujie\n * @param mainHostPath\n * @param appHostPath\n */\nfunction initIframeDom(iframeWindow: Window, wujie: WuJie, mainHostPath: string, appHostPath: string): void {\n  const iframeDocument = iframeWindow.document;\n  const newDoc = window.document.implementation.createHTMLDocument(\"\");\n  const newDocumentElement = iframeDocument.importNode(newDoc.documentElement, true);\n  iframeDocument.documentElement\n    ? iframeDocument.replaceChild(newDocumentElement, iframeDocument.documentElement)\n    : iframeDocument.appendChild(newDocumentElement);\n  iframeWindow.__WUJIE_RAW_DOCUMENT_HEAD__ = iframeDocument.head;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__ = iframeWindow.Document.prototype.querySelector;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__ = iframeWindow.Document.prototype.querySelectorAll;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__ = iframeWindow.Document.prototype.createElement;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__ = iframeWindow.Document.prototype.createTextNode;\n  initBase(iframeWindow, wujie.url);\n  patchIframeHistory(iframeWindow, appHostPath, mainHostPath);\n  patchIframeEvents(iframeWindow);\n  if (wujie.degrade) recordEventListeners(iframeWindow);\n  syncIframeUrlToWindow(iframeWindow);\n\n  patchWindowEffect(iframeWindow);\n  patchDocumentEffect(iframeWindow);\n  patchNodeEffect(iframeWindow);\n  patchRelativeUrlEffect(iframeWindow);\n}\n\n/**\n * js\n */\n// TODO \nfunction stopIframeLoading(iframe: HTMLIFrameElement, useObjectURL: { mainHostPath: string } | false) {\n  const iframeWindow = iframe.contentWindow;\n  const oldDoc = iframeWindow.document;\n  const loopDeadline = Date.now() + 5e3;\n  return new Promise<void>((resolve) => {\n    function loop() {\n      setTimeout(() => {\n        let newDoc: Document;\n        try {\n          newDoc = iframeWindow.document;\n        } catch (err) {\n          newDoc = null;\n        }\n        // wait for document ready\n        if ((!newDoc || newDoc == oldDoc) && Date.now() < loopDeadline) {\n          loop();\n          return;\n        }\n\n        // document ready, if is using ObjectURL, remove its \"blob:\" prefix\n        if (useObjectURL) {\n          const href = iframeWindow.location.href;\n          newDoc.open();\n          newDoc.close();\n\n          const deadline = Date.now() + 1e3;\n          const loop2 = function () {\n            if (Date.now() > deadline) {\n              //  URL \n              // \n              disableSandboxEmptyPageURL();\n              iframe.src = useObjectURL.mainHostPath;\n              stopIframeLoading(iframe, false).then(resolve);\n              return;\n            }\n\n            if (iframeWindow.location.href === href) setTimeout(loop2, 1);\n            else resolve();\n          };\n          loop2();\n\n          return;\n        }\n\n        // document ready\n        iframeWindow.stop ? iframeWindow.stop() : newDoc.execCommand(\"Stop\");\n        resolve();\n      }, 1);\n    }\n    loop();\n  });\n}\n\nexport function patchElementEffect(\n  element: (HTMLElement | Node | ShadowRoot) & { _hasPatch?: boolean },\n  iframeWindow: Window\n): void {\n  const proxyLocation = iframeWindow.__WUJIE.proxyLocation as Location;\n  if (element._hasPatch) return;\n  try {\n    Object.defineProperties(element, {\n      baseURI: {\n        configurable: true,\n        get: () => proxyLocation.protocol + \"//\" + proxyLocation.host + proxyLocation.pathname,\n        set: undefined,\n      },\n      ownerDocument: {\n        configurable: true,\n        get: () => iframeWindow.document,\n      },\n      _hasPatch: { get: () => true },\n    });\n  } catch (error) {\n    console.warn(error);\n  }\n  execHooks(iframeWindow.__WUJIE.plugins, \"patchElementHook\", element, iframeWindow);\n}\n\n/**\n * \n * @param iframeWindow\n */\nexport function syncIframeUrlToWindow(iframeWindow: Window): void {\n  iframeWindow.addEventListener(\"hashchange\", () => syncUrlToWindow(iframeWindow));\n  iframeWindow.addEventListener(\"popstate\", () => {\n    syncUrlToWindow(iframeWindow);\n  });\n}\n\n/**\n * iframe\n * @param scriptResult script\n * @param iframeWindow\n * @param rawElement \n */\nexport function insertScriptToIframe(\n  scriptResult: ScriptObject | ScriptObjectLoader,\n  iframeWindow: Window,\n  rawElement?: HTMLScriptElement\n) {\n  const { src, module, content, crossorigin, crossoriginType, async, attrs, callback, onload } =\n    scriptResult as ScriptObjectLoader;\n  const scriptElement = iframeWindow.document.createElement(\"script\");\n  const nextScriptElement = iframeWindow.document.createElement(\"script\");\n  const { replace, plugins, proxyLocation } = iframeWindow.__WUJIE;\n  const jsLoader = getJsLoader({ plugins, replace });\n  let code = jsLoader(content, src, getCurUrl(proxyLocation));\n  // \n  attrs &&\n    Object.keys(attrs)\n      .filter((key) => !Object.keys(scriptResult).includes(key))\n      .forEach((key) => scriptElement.setAttribute(key, String(attrs[key])));\n\n  // \n  if (content) {\n    // patch location\n    if (!iframeWindow.__WUJIE.degrade && !module && attrs?.type !== \"importmap\") {\n      code = `(function(window, self, global, location) {\n      ${code}\n}).bind(window.__WUJIE.proxy)(\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxyLocation,\n);`;\n    }\n    const descriptor = Object.getOwnPropertyDescriptor(scriptElement, \"src\");\n    //  src  descriptor\n    if (descriptor?.configurable || !descriptor) {\n      //  webpack publicPath  auto \n      try {\n        Object.defineProperty(scriptElement, \"src\", { get: () => src || \"\" });\n      } catch (error) {\n        console.warn(error);\n      }\n    }\n  } else {\n    src && scriptElement.setAttribute(\"src\", src);\n    crossorigin && scriptElement.setAttribute(\"crossorigin\", crossoriginType);\n  }\n  module && scriptElement.setAttribute(\"type\", \"module\");\n  scriptElement.textContent = code || \"\";\n  nextScriptElement.textContent =\n    \"if(window.__WUJIE.execQueue && window.__WUJIE.execQueue.length){ window.__WUJIE.execQueue.shift()()}\";\n\n  const container = rawDocumentQuerySelector.call(iframeWindow.document, \"head\");\n  const execNextScript = () => !async && container.appendChild(nextScriptElement);\n  const afterExecScript = () => {\n    onload?.();\n    execNextScript();\n  };\n\n  // \n  if (/^<!DOCTYPE html/i.test(code)) {\n    error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, scriptResult);\n    return execNextScript();\n  }\n\n  // \n  if (rawElement) {\n    setTagToScript(scriptElement, getTagFromScript(rawElement));\n  }\n  // \n  const isOutlineScript = !content && src;\n  if (isOutlineScript) {\n    scriptElement.onload = afterExecScript;\n    scriptElement.onerror = afterExecScript;\n  }\n  container.appendChild(scriptElement);\n\n  // \n  callback?.(iframeWindow);\n  //  hooks\n  execHooks(plugins, \"appendOrInsertElementHook\", scriptElement, iframeWindow, rawElement);\n  // \n  !isOutlineScript && afterExecScript();\n}\n\n/**\n * iframe\n * @param src \n * @param element\n * @param degradeAttrs\n */\nexport function renderIframeReplaceApp(\n  src: string,\n  element: HTMLElement,\n  degradeAttrs: { [key: string]: any } = {}\n): void {\n  const iframe = window.document.createElement(\"iframe\");\n  const defaultStyle = \"height:100%;width:100%\";\n  setAttrsToElement(iframe, { ...degradeAttrs, src, style: [defaultStyle, degradeAttrs.style].join(\";\") });\n  renderElementToContainer(iframe, element);\n}\n\nconst [getSandboxEmptyPageURL, disableSandboxEmptyPageURL] = (() => {\n  const disabledMarkKey = \"wujie:disableSandboxEmptyPageURL\";\n  let disabled = false;\n  try {\n    disabled = localStorage.getItem(disabledMarkKey) === \"true\";\n  } catch (e) {\n    // pass\n  }\n\n  if (disabled || typeof URL === \"undefined\" || typeof URL.createObjectURL !== \"function\")\n    return [() => \"\", () => void 0] as const;\n\n  let prevURL = \"\";\n  const getSandboxEmptyPageURL = () => {\n    if (disabled) return \"\";\n    if (prevURL) return prevURL;\n\n    const blob = new Blob([\"<!DOCTYPE html><html><head></head><body></body></html>\"], { type: \"text/html\" });\n    prevURL = URL.createObjectURL(blob);\n    return prevURL;\n  };\n\n  const disableSandboxEmptyPageURL = () => {\n    disabled = true;\n    try {\n      // TODO: \n      localStorage.setItem(disabledMarkKey, \"true\");\n    } catch (e) {}\n  };\n\n  return [getSandboxEmptyPageURL, disableSandboxEmptyPageURL];\n})();\n\n/**\n * js\n * iframe\n * iframehtml\n */\nexport function iframeGenerator(\n  sandbox: WuJie,\n  attrs: { [key: string]: any },\n  mainHostPath: string,\n  appHostPath: string,\n  appRoutePath: string\n): HTMLIFrameElement {\n  let src = attrs && attrs.src;\n  let useObjectURL = false;\n  if (!src) {\n    src = getSandboxEmptyPageURL();\n    useObjectURL = !!src;\n    if (!src) src = mainHostPath; // fallback to mainHostPath\n  }\n\n  const iframe = window.document.createElement(\"iframe\");\n  const attrsMerge = {\n    style: \"display: none\",\n    ...attrs,\n    src,\n    name: sandbox.id,\n    [WUJIE_DATA_FLAG]: \"\",\n  };\n  setAttrsToElement(iframe, attrsMerge);\n  window.document.body.appendChild(iframe);\n\n  const iframeWindow = iframe.contentWindow;\n  // \n  patchIframeVariable(iframeWindow, sandbox, appHostPath);\n  sandbox.iframeReady = stopIframeLoading(iframe, useObjectURL && { mainHostPath }).then(() => {\n    if (!iframeWindow.__WUJIE) {\n      patchIframeVariable(iframeWindow, sandbox, appHostPath);\n    }\n    initIframeDom(iframeWindow, sandbox, mainHostPath, appHostPath);\n    /**\n     * url\n     */\n    if (!isMatchSyncQueryById(iframeWindow.__WUJIE.id)) {\n      iframeWindow.history.replaceState(null, \"\", mainHostPath + appRoutePath);\n    }\n  });\n  return iframe;\n}\n","import { patchElementEffect, renderIframeReplaceApp } from \"./iframe\";\nimport { renderElementToContainer } from \"./shadow\";\nimport { pushUrlToWindow } from \"./sync\";\nimport { documentProxyProperties, rawDocumentQuerySelector } from \"./common\";\nimport { WUJIE_TIPS_RELOAD_DISABLED, WUJIE_TIPS_GET_ELEMENT_BY_ID } from \"./constant\";\nimport {\n  getTargetValue,\n  anchorElementGenerator,\n  getDegradeIframe,\n  isCallable,\n  checkProxyFunction,\n  warn,\n  stopMainAppRun,\n} from \"./utils\";\n\n/**\n * location href set\n */\nfunction locationHrefSet(iframe: HTMLIFrameElement, value: string, appHostPath: string): boolean {\n  const { shadowRoot, id, degrade, document, degradeAttrs } = iframe.contentWindow.__WUJIE;\n  let url = value;\n  if (!/^http/.test(url)) {\n    let hrefElement = anchorElementGenerator(url);\n    url = appHostPath + hrefElement.pathname + hrefElement.search + hrefElement.hash;\n    hrefElement = null;\n  }\n  iframe.contentWindow.__WUJIE.hrefFlag = true;\n  if (degrade) {\n    const iframeBody = rawDocumentQuerySelector.call(iframe.contentDocument, \"body\");\n    renderElementToContainer(document.documentElement, iframeBody);\n    renderIframeReplaceApp(window.decodeURIComponent(url), getDegradeIframe(id).parentElement, degradeAttrs);\n  } else renderIframeReplaceApp(url, shadowRoot.host.parentElement, degradeAttrs);\n  pushUrlToWindow(id, url);\n  return true;\n}\n\n/**\n * windowdocumentlocation\n */\nexport function proxyGenerator(\n  iframe: HTMLIFrameElement,\n  urlElement: HTMLAnchorElement,\n  mainHostPath: string,\n  appHostPath: string\n): {\n  proxyWindow: Window;\n  proxyDocument: Object;\n  proxyLocation: Object;\n} {\n  const proxyWindow = new Proxy(iframe.contentWindow, {\n    get: (target: Window, p: PropertyKey): any => {\n      // location\n      if (p === \"location\") {\n        return target.__WUJIE.proxyLocation;\n      }\n      // \n      if (p === \"self\" || (p === \"window\" && Object.getOwnPropertyDescriptor(window, \"window\").get)) {\n        return target.__WUJIE.proxy;\n      }\n      // this\n      if (p === \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\" || p === \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__\") {\n        return target[p];\n      }\n      // https://262.ecma-international.org/8.0/#sec-proxy-object-internal-methods-and-internal-slots-get-p-receiver\n      const descriptor = Object.getOwnPropertyDescriptor(target, p);\n      if (descriptor?.configurable === false && descriptor?.writable === false) {\n        return target[p];\n      }\n      // this\n      return getTargetValue(target, p);\n    },\n\n    set: (target: Window, p: PropertyKey, value: any) => {\n      checkProxyFunction(target, value);\n      target[p] = value;\n      return true;\n    },\n\n    has: (target: Window, p: PropertyKey) => p in target,\n  });\n\n  // proxy document\n  const proxyDocument = new Proxy(\n    {},\n    {\n      get: function (_fakeDocument, propKey) {\n        const document = window.document;\n        const { shadowRoot, proxyLocation } = iframe.contentWindow.__WUJIE;\n        // iframewebcomponent\n        if (!shadowRoot) stopMainAppRun();\n        const rawCreateElement = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__;\n        const rawCreateTextNode = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__;\n        // need fix\n        if (propKey === \"createElement\" || propKey === \"createTextNode\") {\n          return new Proxy(document[propKey], {\n            apply(_createElement, _ctx, args) {\n              const rawCreateMethod = propKey === \"createElement\" ? rawCreateElement : rawCreateTextNode;\n              const element = rawCreateMethod.apply(iframe.contentDocument, args);\n              patchElementEffect(element, iframe.contentWindow);\n              return element;\n            },\n          });\n        }\n        if (propKey === \"documentURI\" || propKey === \"URL\") {\n          return (proxyLocation as Location).href;\n        }\n\n        // from shadowRoot\n        if (\n          propKey === \"getElementsByTagName\" ||\n          propKey === \"getElementsByClassName\" ||\n          propKey === \"getElementsByName\"\n        ) {\n          return new Proxy(shadowRoot.querySelectorAll, {\n            apply(querySelectorAll, _ctx, args) {\n              let arg = args[0];\n              if (_ctx !== iframe.contentDocument) {\n                return _ctx[propKey].apply(_ctx, args);\n              }\n\n              if (propKey === \"getElementsByTagName\" && arg === \"script\") {\n                return iframe.contentDocument.scripts;\n              }\n              if (propKey === \"getElementsByClassName\") arg = \".\" + arg;\n              if (propKey === \"getElementsByName\") arg = `[name=\"${arg}\"]`;\n\n              // FIXME: This string must be a valid CSS selector string; if it's not, a SyntaxError exception is thrown;\n              // so we should ensure that the program can execute normally in case of exceptions.\n              // reference: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll\n\n              let res: NodeList[] | [];\n              try {\n                res = querySelectorAll.call(shadowRoot, arg);\n              } catch (error) {\n                res = [];\n              }\n\n              return res;\n            },\n          });\n        }\n        if (propKey === \"getElementById\") {\n          return new Proxy(shadowRoot.querySelector, {\n            // case document.querySelector.call\n            apply(target, ctx, args) {\n              if (ctx !== iframe.contentDocument) {\n                return ctx[propKey]?.apply(ctx, args);\n              }\n              try {\n                return (\n                  target.call(shadowRoot, `[id=\"${args[0]}\"]`) ||\n                  iframe.contentWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__.call(\n                    iframe.contentWindow.document,\n                    `#${args[0]}`\n                  )\n                );\n              } catch (error) {\n                warn(WUJIE_TIPS_GET_ELEMENT_BY_ID);\n                return null;\n              }\n            },\n          });\n        }\n        if (propKey === \"querySelector\" || propKey === \"querySelectorAll\") {\n          const rawPropMap = {\n            querySelector: \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\",\n            querySelectorAll: \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__\",\n          };\n          return new Proxy(shadowRoot[propKey], {\n            apply(target, ctx, args) {\n              if (ctx !== iframe.contentDocument) {\n                return ctx[propKey]?.apply(ctx, args);\n              }\n              // shadowDomarraybaserouter\n              return (\n                target.apply(shadowRoot, args) ||\n                (args[0] === \"base\"\n                  ? null\n                  : iframe.contentWindow[rawPropMap[propKey]].call(iframe.contentWindow.document, args[0]))\n              );\n            },\n          });\n        }\n        if (propKey === \"documentElement\" || propKey === \"scrollingElement\") return shadowRoot.firstElementChild;\n        if (propKey === \"forms\") return shadowRoot.querySelectorAll(\"form\");\n        if (propKey === \"images\") return shadowRoot.querySelectorAll(\"img\");\n        if (propKey === \"links\") return shadowRoot.querySelectorAll(\"a\");\n        const { ownerProperties, shadowProperties, shadowMethods, documentProperties, documentMethods } =\n          documentProxyProperties;\n        if (ownerProperties.concat(shadowProperties).includes(propKey.toString())) {\n          if (propKey === \"activeElement\" && shadowRoot.activeElement === null) return shadowRoot.body;\n          return shadowRoot[propKey];\n        }\n        if (shadowMethods.includes(propKey.toString())) {\n          return getTargetValue(shadowRoot, propKey) ?? getTargetValue(document, propKey);\n        }\n        // from window.document\n        if (documentProperties.includes(propKey.toString())) {\n          return document[propKey];\n        }\n        if (documentMethods.includes(propKey.toString())) {\n          return getTargetValue(document, propKey);\n        }\n      },\n    }\n  );\n\n  // proxy location\n  const proxyLocation = new Proxy(\n    {},\n    {\n      get: function (_fakeLocation, propKey) {\n        const location = iframe.contentWindow.location;\n        if (\n          propKey === \"host\" ||\n          propKey === \"hostname\" ||\n          propKey === \"protocol\" ||\n          propKey === \"port\" ||\n          propKey === \"origin\"\n        ) {\n          return urlElement[propKey];\n        }\n        if (propKey === \"href\") {\n          return location[propKey].replace(mainHostPath, appHostPath);\n        }\n        if (propKey === \"reload\") {\n          warn(WUJIE_TIPS_RELOAD_DISABLED);\n          return () => null;\n        }\n        if (propKey === \"replace\") {\n          return new Proxy(location[propKey], {\n            apply(replace, _ctx, args) {\n              return replace.call(location, args[0]?.replace(appHostPath, mainHostPath));\n            },\n          });\n        }\n        return getTargetValue(location, propKey);\n      },\n      set: function (_fakeLocation, propKey, value) {\n        // iframe\n        if (propKey === \"href\") {\n          return locationHrefSet(iframe, value, appHostPath);\n        }\n        iframe.contentWindow.location[propKey] = value;\n        return true;\n      },\n      ownKeys: function () {\n        return Object.keys(iframe.contentWindow.location).filter((key) => key !== \"reload\");\n      },\n      getOwnPropertyDescriptor: function (_target, key) {\n        return { enumerable: true, configurable: true, value: this[key] };\n      },\n    }\n  );\n  return { proxyWindow, proxyDocument, proxyLocation };\n}\n\n/**\n * documentlocation\n */\nexport function localGenerator(\n  iframe: HTMLIFrameElement,\n  urlElement: HTMLAnchorElement,\n  mainHostPath: string,\n  appHostPath: string\n): {\n  proxyDocument: Object;\n  proxyLocation: Object;\n} {\n  //  document\n  const proxyDocument = {};\n  const sandbox = iframe.contentWindow.__WUJIE;\n  // \n  Object.defineProperties(proxyDocument, {\n    createElement: {\n      get: () => {\n        return function (...args) {\n          const element = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__.apply(\n            iframe.contentDocument,\n            args\n          );\n          patchElementEffect(element, iframe.contentWindow);\n          return element;\n        };\n      },\n    },\n    createTextNode: {\n      get: () => {\n        return function (...args) {\n          const element = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__.apply(\n            iframe.contentDocument,\n            args\n          );\n          patchElementEffect(element, iframe.contentWindow);\n          return element;\n        };\n      },\n    },\n    documentURI: {\n      get: () => (sandbox.proxyLocation as Location).href,\n    },\n    URL: {\n      get: () => (sandbox.proxyLocation as Location).href,\n    },\n    getElementsByTagName: {\n      get() {\n        return function (...args) {\n          const tagName = args[0];\n          if (tagName === \"script\") {\n            return iframe.contentDocument.scripts as any;\n          }\n          return sandbox.document.getElementsByTagName(tagName) as any;\n        };\n      },\n    },\n    getElementById: {\n      get() {\n        return function (...args) {\n          const id = args[0];\n          return (\n            (sandbox.document.getElementById(id) as any) ||\n            iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector(`#${id}`)\n          );\n        };\n      },\n    },\n  });\n  // \n  const {\n    modifyLocalProperties,\n    modifyProperties,\n    ownerProperties,\n    shadowProperties,\n    shadowMethods,\n    documentProperties,\n    documentMethods,\n  } = documentProxyProperties;\n  modifyProperties\n    .filter((key) => !modifyLocalProperties.includes(key))\n    .concat(ownerProperties, shadowProperties, shadowMethods, documentProperties, documentMethods)\n    .forEach((key) => {\n      Object.defineProperty(proxyDocument, key, {\n        get: () => {\n          const value = sandbox.document?.[key];\n          return isCallable(value) ? value.bind(sandbox.document) : value;\n        },\n      });\n    });\n\n  //  location\n  const proxyLocation = {};\n  const location = iframe.contentWindow.location;\n  const locationKeys = Object.keys(location);\n  const constantKey = [\"host\", \"hostname\", \"port\", \"protocol\", \"port\"];\n  constantKey.forEach((key) => {\n    proxyLocation[key] = urlElement[key];\n  });\n  Object.defineProperties(proxyLocation, {\n    href: {\n      get: () => location.href.replace(mainHostPath, appHostPath),\n      set: (value) => {\n        locationHrefSet(iframe, value, appHostPath);\n      },\n    },\n    reload: {\n      get() {\n        warn(WUJIE_TIPS_RELOAD_DISABLED);\n        return () => null;\n      },\n    },\n  });\n  locationKeys\n    .filter((key) => !constantKey.concat([\"href\", \"reload\"]).includes(key))\n    .forEach((key) => {\n      Object.defineProperty(proxyLocation, key, {\n        get: () => (isCallable(location[key]) ? location[key].bind(location) : location[key]),\n      });\n    });\n  return { proxyDocument, proxyLocation };\n}\n","import { warn, error } from \"./utils\";\nimport { WUJIE_ALL_EVENT, WUJIE_TIPS_NO_SUBJECT } from \"./constant\";\n\nexport type EventObj = { [event: string]: Array<Function> };\n\n// map\n// WuJie__WUJIE_INJECT\nexport const appEventObjMap = (() => {\n  if (window.__WUJIE_INJECT?.appEventObjMap) return window.__WUJIE_INJECT.appEventObjMap;\n  else {\n    const cacheMap = window.__POWERED_BY_WUJIE__ ? window.__WUJIE.inject.appEventObjMap : new Map<String, EventObj>();\n    window.__WUJIE_INJECT = { ...window.__WUJIE_INJECT, appEventObjMap: cacheMap };\n    return cacheMap;\n  }\n})();\n\n// eventBus \nexport class EventBus {\n  private id: string;\n  private eventObj: EventObj;\n\n  constructor(id: string) {\n    this.id = id;\n    this.$clear();\n    if (!appEventObjMap.get(this.id)) {\n      appEventObjMap.set(this.id, {});\n    }\n    this.eventObj = appEventObjMap.get(this.id);\n  }\n\n  // \n  public $on(event: string, fn: Function): EventBus {\n    const cbs = this.eventObj[event];\n    if (!cbs) {\n      this.eventObj[event] = [fn];\n      return this;\n    }\n    if (!cbs.includes(fn)) cbs.push(fn);\n    return this;\n  }\n\n  /** $emit$emit */\n  public $onAll(fn: (event: string, ...args: Array<any>) => any): EventBus {\n    return this.$on(WUJIE_ALL_EVENT, fn);\n  }\n\n  // \n  public $once(event: string, fn: Function): void {\n    const on = function (...args: Array<any>) {\n      this.$off(event, on);\n      fn(...args);\n    }.bind(this);\n    this.$on(event, on);\n  }\n\n  // \n  public $off(event: string, fn: Function): EventBus {\n    const cbs = this.eventObj[event];\n    if (!event || !cbs || !cbs.length) {\n      warn(`${event} ${WUJIE_TIPS_NO_SUBJECT}`);\n      return this;\n    }\n\n    let cb;\n    let i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn) {\n        cbs.splice(i, 1);\n        break;\n      }\n    }\n    return this;\n  }\n\n  // $onAll\n  public $offAll(fn: Function): EventBus {\n    return this.$off(WUJIE_ALL_EVENT, fn);\n  }\n\n  // \n  public $emit(event: string, ...args: Array<any>): EventBus {\n    let cbs = [];\n    let allCbs = [];\n\n    appEventObjMap.forEach((eventObj) => {\n      if (eventObj[event]) cbs = cbs.concat(eventObj[event]);\n      if (eventObj[WUJIE_ALL_EVENT]) allCbs = allCbs.concat(eventObj[WUJIE_ALL_EVENT]);\n    });\n\n    if (!event || (cbs.length === 0 && allCbs.length === 0)) {\n      warn(`${event} ${WUJIE_TIPS_NO_SUBJECT}`);\n    } else {\n      try {\n        for (let i = 0, l = cbs.length; i < l; i++) cbs[i](...args);\n        for (let i = 0, l = allCbs.length; i < l; i++) allCbs[i](event, ...args);\n      } catch (e) {\n        error(e);\n      }\n    }\n    return this;\n  }\n\n  // \n  public $clear(): EventBus {\n    const eventObj = appEventObjMap.get(this.id) ?? {};\n    const events = Object.keys(eventObj);\n    events.forEach((event) => delete eventObj[event]);\n    return this;\n  }\n}\n","import {\n  iframeGenerator,\n  recoverEventListeners,\n  recoverDocumentListeners,\n  insertScriptToIframe,\n  patchEventTimeStamp,\n} from \"./iframe\";\nimport { syncUrlToWindow, syncUrlToIframe, clearInactiveAppUrl } from \"./sync\";\nimport {\n  createWujieWebComponent,\n  clearChild,\n  getPatchStyleElements,\n  renderElementToContainer,\n  renderTemplateToShadowRoot,\n  renderTemplateToIframe,\n  initRenderIframeAndContainer,\n  removeLoading,\n} from \"./shadow\";\nimport { proxyGenerator, localGenerator } from \"./proxy\";\nimport { ScriptResultList } from \"./entry\";\nimport { getPlugins, getPresetLoaders } from \"./plugin\";\nimport { removeEventListener } from \"./effect\";\nimport {\n  SandboxCache,\n  idToSandboxCacheMap,\n  addSandboxCacheWithWujie,\n  deleteWujieById,\n  rawElementAppendChild,\n  rawDocumentQuerySelector,\n} from \"./common\";\nimport { EventBus, appEventObjMap, EventObj } from \"./event\";\nimport { isFunction, wujieSupport, appRouteParse, requestIdleCallback, getAbsolutePath, eventTrigger } from \"./utils\";\nimport { WUJIE_DATA_ATTACH_CSS_FLAG } from \"./constant\";\nimport { plugin, ScriptObjectLoader, loadErrorHandler } from \"./index\";\n\nexport type lifecycle = (appWindow: Window) => any;\ntype lifecycles = {\n  beforeLoad: lifecycle;\n  beforeMount: lifecycle;\n  afterMount: lifecycle;\n  beforeUnmount: lifecycle;\n  afterUnmount: lifecycle;\n  activated: lifecycle;\n  deactivated: lifecycle;\n  loadError: loadErrorHandler;\n};\n/**\n *  Proxyiframe \n */\nexport default class Wujie {\n  public id: string;\n  /**  */\n  public url: string;\n  /**  */\n  public alive: boolean;\n  /** window */\n  public proxy: WindowProxy;\n  /** document */\n  public proxyDocument: Object;\n  /** location */\n  public proxyLocation: Object;\n  /**  */\n  public bus: EventBus;\n  /**  */\n  public el: HTMLElement;\n  /** js */\n  public iframe: HTMLIFrameElement;\n  /** css */\n  public shadowRoot: ShadowRoot;\n  /** template */\n  public template: string;\n  /**  */\n  public replace: (code: string) => string;\n  /** fetch */\n  public fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n  /**  */\n  public lifecycles: lifecycles;\n  /**  */\n  public plugins: Array<plugin>;\n  /** jsready */\n  public iframeReady: Promise<void>;\n  /**  */\n  public preload: Promise<void>;\n  /** iframe */\n  public degradeAttrs: { [key: string]: any };\n  /** js */\n  public execQueue: Array<Function>;\n  /**  */\n  public execFlag: boolean;\n  /**  */\n  public activeFlag: boolean;\n  /** mount */\n  public mountFlag: boolean;\n  /**  */\n  public sync: boolean;\n  /**  */\n  public prefix: { [key: string]: string };\n  /**  */\n  public hrefFlag: boolean;\n  /** fiber */\n  public fiber: boolean;\n  /**  */\n  public degrade: boolean;\n  /** document */\n  public document: Document;\n  /** styleSheet */\n  public styleSheetElements: Array<HTMLLinkElement | HTMLStyleElement>;\n  /** head */\n  public head: HTMLHeadElement;\n  /** body */\n  public body: HTMLBodyElement;\n  /** dom */\n  public elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n\n  /** $wujie */\n  public provide: {\n    bus: EventBus;\n    shadowRoot?: ShadowRoot;\n    props?: { [key: string]: any };\n    location?: Object;\n  };\n\n  /**  */\n  public inject: {\n    idToSandboxMap: Map<String, SandboxCache>;\n    appEventObjMap: Map<String, EventObj>;\n    mainHostPath: string;\n  };\n\n  /** \n   * 1\n   * 2iframefetch\n   * 3shadow\n   * 4\n   */\n  public async active(options: {\n    url: string;\n    sync?: boolean;\n    prefix?: { [key: string]: string };\n    template?: string;\n    el?: string | HTMLElement;\n    props?: { [key: string]: any };\n    alive?: boolean;\n    fetch?: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n    replace?: (code: string) => string;\n  }): Promise<void> {\n    const { sync, url, el, template, props, alive, prefix, fetch, replace } = options;\n    this.url = url;\n    this.sync = sync;\n    this.alive = alive;\n    this.hrefFlag = false;\n    this.prefix = prefix ?? this.prefix;\n    this.replace = replace ?? this.replace;\n    this.provide.props = props ?? this.provide.props;\n    this.activeFlag = true;\n    // wait iframe init\n    await this.iframeReady;\n\n    // fetch\n    // TODO fetch\n    const iframeWindow = this.iframe.contentWindow;\n    const iframeFetch = fetch\n      ? (input: RequestInfo, init?: RequestInit) =>\n          fetch(typeof input === \"string\" ? getAbsolutePath(input, (this.proxyLocation as Location).href) : input, init)\n      : this.fetch;\n    if (iframeFetch) {\n      iframeWindow.fetch = iframeFetch;\n      this.fetch = iframeFetch;\n    }\n\n    // \n    if (this.execFlag && this.alive) {\n      // \n      syncUrlToWindow(iframeWindow);\n    } else {\n      // urliframeurl\n      syncUrlToIframe(iframeWindow);\n      syncUrlToWindow(iframeWindow);\n    }\n\n    // inject template\n    this.template = template ?? this.template;\n\n    /*  */\n    if (this.degrade) {\n      const iframeBody = rawDocumentQuerySelector.call(iframeWindow.document, \"body\") as HTMLElement;\n      const { iframe, container } = initRenderIframeAndContainer(this.id, el ?? iframeBody, this.degradeAttrs);\n      this.el = container;\n      // jsiframedom\n      if (el) clearChild(iframeBody);\n      // vueevent.timeStamp\n      patchEventTimeStamp(iframe.contentWindow, iframeWindow);\n      // iframeunmount\n      iframe.contentWindow.onunload = () => {\n        this.unmount();\n      };\n      if (this.document) {\n        if (this.alive) {\n          iframe.contentDocument.replaceChild(this.document.documentElement, iframe.contentDocument.documentElement);\n          // \n          recoverEventListeners(iframe.contentDocument.documentElement, iframeWindow);\n        } else {\n          await renderTemplateToIframe(iframe.contentDocument, this.iframe.contentWindow, this.template);\n          // react16\n          recoverDocumentListeners(this.document.documentElement, iframe.contentDocument.documentElement, iframeWindow);\n        }\n      } else {\n        await renderTemplateToIframe(iframe.contentDocument, this.iframe.contentWindow, this.template);\n      }\n      this.document = iframe.contentDocument;\n      return;\n    }\n\n    if (this.shadowRoot) {\n      /*\n       document.addEventListener was transfer to shadowRoot.addEventListener\n       react 16 SyntheticEvent will remember document event for avoid repeat listen\n       shadowRoot have to dispatchEvent for react 16 so can't be destroyed\n       this may lead memory leak risk\n       */\n      this.el = renderElementToContainer(this.shadowRoot.host, el);\n      if (this.alive) return;\n    } else {\n      // iframeWeb Componentconnect\n      const iframeBody = rawDocumentQuerySelector.call(iframeWindow.document, \"body\") as HTMLElement;\n      this.el = renderElementToContainer(createWujieWebComponent(this.id), el ?? iframeBody);\n    }\n\n    await renderTemplateToShadowRoot(this.shadowRoot, iframeWindow, this.template);\n    this.patchCssRules();\n\n    // inject shadowRoot to app\n    this.provide.shadowRoot = this.shadowRoot;\n  }\n\n  // \n  public requestIdleCallback(callback) {\n    return requestIdleCallback(() => {\n      // \n      if (!this.iframe) return;\n      callback.apply(this);\n    });\n  }\n  /** \n   * 1js\n   * 2\n   */\n  public async start(getExternalScripts: () => ScriptResultList): Promise<void> {\n    this.execFlag = true;\n    // \n    const scriptResultList = await getExternalScripts();\n    // \n    if (!this.iframe) return;\n    const iframeWindow = this.iframe.contentWindow;\n    // \n    iframeWindow.__POWERED_BY_WUJIE__ = true;\n    // \n    const beforeScriptResultList: ScriptObjectLoader[] = getPresetLoaders(\"jsBeforeLoaders\", this.plugins);\n    // \n    const afterScriptResultList: ScriptObjectLoader[] = getPresetLoaders(\"jsAfterLoaders\", this.plugins);\n    // \n    const syncScriptResultList: ScriptResultList = [];\n    // async\n    const asyncScriptResultList: ScriptResultList = [];\n    // deferDOMContentLoaded\n    const deferScriptResultList: ScriptResultList = [];\n    scriptResultList.forEach((scriptResult) => {\n      if (scriptResult.defer) deferScriptResultList.push(scriptResult);\n      else if (scriptResult.async) asyncScriptResultList.push(scriptResult);\n      else syncScriptResultList.push(scriptResult);\n    });\n\n    // \n    beforeScriptResultList.forEach((beforeScriptResult) => {\n      this.execQueue.push(() =>\n        this.fiber\n          ? this.requestIdleCallback(() => insertScriptToIframe(beforeScriptResult, iframeWindow))\n          : insertScriptToIframe(beforeScriptResult, iframeWindow)\n      );\n    });\n\n    // \n    syncScriptResultList.concat(deferScriptResultList).forEach((scriptResult) => {\n      this.execQueue.push(() =>\n        scriptResult.contentPromise.then((content) =>\n          this.fiber\n            ? this.requestIdleCallback(() => insertScriptToIframe({ ...scriptResult, content }, iframeWindow))\n            : insertScriptToIframe({ ...scriptResult, content }, iframeWindow)\n        )\n      );\n    });\n\n    // \n    asyncScriptResultList.forEach((scriptResult) => {\n      scriptResult.contentPromise.then((content) => {\n        this.fiber\n          ? this.requestIdleCallback(() => insertScriptToIframe({ ...scriptResult, content }, iframeWindow))\n          : insertScriptToIframe({ ...scriptResult, content }, iframeWindow);\n      });\n    });\n\n    //mount\n    this.execQueue.push(this.fiber ? () => this.requestIdleCallback(() => this.mount()) : () => this.mount());\n\n    // DOMContentLoaded \n    const domContentLoadedTrigger = () => {\n      eventTrigger(iframeWindow.document, \"DOMContentLoaded\");\n      eventTrigger(iframeWindow, \"DOMContentLoaded\");\n      this.execQueue.shift()?.();\n    };\n    this.execQueue.push(this.fiber ? () => this.requestIdleCallback(domContentLoadedTrigger) : domContentLoadedTrigger);\n\n    // \n    afterScriptResultList.forEach((afterScriptResult) => {\n      this.execQueue.push(() =>\n        this.fiber\n          ? this.requestIdleCallback(() => insertScriptToIframe(afterScriptResult, iframeWindow))\n          : insertScriptToIframe(afterScriptResult, iframeWindow)\n      );\n    });\n\n    // loaded \n    const domLoadedTrigger = () => {\n      eventTrigger(iframeWindow.document, \"readystatechange\");\n      eventTrigger(iframeWindow, \"load\");\n      this.execQueue.shift()?.();\n    };\n    this.execQueue.push(this.fiber ? () => this.requestIdleCallback(domLoadedTrigger) : domLoadedTrigger);\n    // mountloading\n    if (this.alive || !isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT)) removeLoading(this.el);\n    this.execQueue.shift()();\n\n    // execQueuestart\n    return new Promise((resolve) => {\n      this.execQueue.push(() => {\n        resolve();\n        this.execQueue.shift()?.();\n      });\n    });\n  }\n\n  /**\n   * mount__WUJIE_MOUNTasync\n   * fibermountmount\n   * __WUJIE_MOUNTwindowmount\n   * window.__WUJIE.mount()\n   */\n  public mount(): void {\n    if (this.mountFlag) return;\n    if (isFunction(this.iframe.contentWindow.__WUJIE_MOUNT)) {\n      removeLoading(this.el);\n      this.lifecycles?.beforeMount?.(this.iframe.contentWindow);\n      this.iframe.contentWindow.__WUJIE_MOUNT();\n      this.lifecycles?.afterMount?.(this.iframe.contentWindow);\n      this.mountFlag = true;\n    }\n    if (this.alive) {\n      this.lifecycles?.activated?.(this.iframe.contentWindow);\n    }\n    this.execQueue.shift()?.();\n  }\n\n  /** proxyLocation.hrefshadow */\n  public async unmount(): Promise<void> {\n    this.activeFlag = false;\n    // \n    clearInactiveAppUrl();\n    if (this.alive) {\n      this.lifecycles?.deactivated?.(this.iframe.contentWindow);\n    }\n    if (!this.mountFlag) return;\n    if (isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT) && !this.alive && !this.hrefFlag) {\n      this.lifecycles?.beforeUnmount?.(this.iframe.contentWindow);\n      await this.iframe.contentWindow.__WUJIE_UNMOUNT();\n      this.lifecycles?.afterUnmount?.(this.iframe.contentWindow);\n      this.mountFlag = false;\n      this.bus?.$clear();\n      if (!this.degrade) {\n        clearChild(this.shadowRoot);\n        // head body\n        removeEventListener(this.head);\n        removeEventListener(this.body);\n      }\n      clearChild(this.head);\n      clearChild(this.body);\n    }\n  }\n\n  /**  */\n  public async destroy() {\n    await this.unmount();\n    this.bus.$clear();\n    this.shadowRoot = null;\n    this.proxy = null;\n    this.proxyDocument = null;\n    this.proxyLocation = null;\n    this.execQueue = null;\n    this.provide = null;\n    this.degradeAttrs = null;\n    this.styleSheetElements = null;\n    this.bus = null;\n    this.replace = null;\n    this.fetch = null;\n    this.execFlag = null;\n    this.mountFlag = null;\n    this.hrefFlag = null;\n    this.document = null;\n    this.head = null;\n    this.body = null;\n    this.elementEventCacheMap = null;\n    this.lifecycles = null;\n    this.plugins = null;\n    this.provide = null;\n    this.inject = null;\n    this.execQueue = null;\n    this.prefix = null;\n    //  dom\n    if (this.el) {\n      clearChild(this.el);\n      this.el = null;\n    }\n    //  iframe \n    if (this.iframe) {\n      const iframeWindow = this.iframe.contentWindow;\n      if (iframeWindow?.__WUJIE_EVENTLISTENER__) {\n        iframeWindow.__WUJIE_EVENTLISTENER__.forEach((o) => {\n          iframeWindow.removeEventListener(o.type, o.listener, o.options);\n        });\n      }\n      this.iframe.parentNode?.removeChild(this.iframe);\n      this.iframe = null;\n    }\n    deleteWujieById(this.id);\n  }\n\n  /** mount */\n  public rebuildStyleSheets(): void {\n    if (this.styleSheetElements && this.styleSheetElements.length) {\n      this.styleSheetElements.forEach((styleSheetElement) => {\n        rawElementAppendChild.call(this.degrade ? this.document.head : this.shadowRoot.head, styleSheetElement);\n      });\n    }\n    this.patchCssRules();\n  }\n\n  /**\n   * \n   * 1:root:host\n   * 2@font-faceshadowRoot\n   */\n  public patchCssRules(): void {\n    if (this.degrade) return;\n    if (this.shadowRoot.host.hasAttribute(WUJIE_DATA_ATTACH_CSS_FLAG)) return;\n    const [hostStyleSheetElement, fontStyleSheetElement] = getPatchStyleElements(\n      Array.from(this.iframe.contentDocument.querySelectorAll(\"style\")).map(\n        (styleSheetElement) => styleSheetElement.sheet\n      )\n    );\n    if (hostStyleSheetElement) {\n      this.shadowRoot.head.appendChild(hostStyleSheetElement);\n      this.styleSheetElements.push(hostStyleSheetElement);\n    }\n    if (fontStyleSheetElement) {\n      this.shadowRoot.host.appendChild(fontStyleSheetElement);\n    }\n    (hostStyleSheetElement || fontStyleSheetElement) &&\n      this.shadowRoot.host.setAttribute(WUJIE_DATA_ATTACH_CSS_FLAG, \"\");\n  }\n\n  /**\n   * @param id id\n   * @param url urlprotocolhostpathqueryhash\n   */\n  constructor(options: {\n    name: string;\n    url: string;\n    attrs: { [key: string]: any };\n    degradeAttrs: { [key: string]: any };\n    fiber: boolean;\n    degrade;\n    plugins: Array<plugin>;\n    lifecycles: lifecycles;\n  }) {\n    // inject\n    if (window.__POWERED_BY_WUJIE__) this.inject = window.__WUJIE.inject;\n    else {\n      this.inject = {\n        idToSandboxMap: idToSandboxCacheMap,\n        appEventObjMap,\n        mainHostPath: window.location.protocol + \"//\" + window.location.host,\n      };\n    }\n    const { name, url, attrs, fiber, degradeAttrs, degrade, lifecycles, plugins } = options;\n    this.id = name;\n    this.fiber = fiber;\n    this.degrade = degrade || !wujieSupport;\n    this.bus = new EventBus(this.id);\n    this.url = url;\n    this.degradeAttrs = degradeAttrs;\n    this.provide = { bus: this.bus };\n    this.styleSheetElements = [];\n    this.execQueue = [];\n    this.lifecycles = lifecycles;\n    this.plugins = getPlugins(plugins);\n\n    // \n    const { urlElement, appHostPath, appRoutePath } = appRouteParse(url);\n    const { mainHostPath } = this.inject;\n    // iframe\n    this.iframe = iframeGenerator(this, attrs, mainHostPath, appHostPath, appRoutePath);\n\n    if (this.degrade) {\n      const { proxyDocument, proxyLocation } = localGenerator(this.iframe, urlElement, mainHostPath, appHostPath);\n      this.proxyDocument = proxyDocument;\n      this.proxyLocation = proxyLocation;\n    } else {\n      const { proxyWindow, proxyDocument, proxyLocation } = proxyGenerator(\n        this.iframe,\n        urlElement,\n        mainHostPath,\n        appHostPath\n      );\n      this.proxy = proxyWindow;\n      this.proxyDocument = proxyDocument;\n      this.proxyLocation = proxyLocation;\n    }\n    this.provide.location = this.proxyLocation;\n\n    addSandboxCacheWithWujie(this.id, this);\n  }\n}\n","import importHTML, { processCssLoader } from \"./entry\";\nimport { StyleObject, ScriptAttributes } from \"./template\";\nimport WuJie, { lifecycle } from \"./sandbox\";\nimport { defineWujieWebComponent, addLoading } from \"./shadow\";\nimport { processAppForHrefJump } from \"./sync\";\nimport { getPlugins } from \"./plugin\";\nimport {\n  wujieSupport,\n  mergeOptions,\n  isFunction,\n  requestIdleCallback,\n  isMatchSyncQueryById,\n  warn,\n  stopMainAppRun,\n} from \"./utils\";\nimport { getWujieById, getOptionsById, addSandboxCacheWithOptions } from \"./common\";\nimport { EventBus } from \"./event\";\nimport { WUJIE_TIPS_NOT_SUPPORTED } from \"./constant\";\n\nexport const bus = new EventBus(Date.now().toString());\n\nexport interface ScriptObjectLoader {\n  /**  */\n  src?: string;\n  /** module */\n  module?: boolean;\n  /** async */\n  async?: boolean;\n  /** crossorigin */\n  crossorigin?: boolean;\n  /** crossorigin */\n  crossoriginType?: \"anonymous\" | \"use-credentials\" | \"\";\n  /**  */\n  attrs?: ScriptAttributes;\n  /** script */\n  content?: string;\n  /**  */\n  callback?: (appWindow: Window) => any;\n  /**  */\n  onload?: Function;\n}\nexport interface plugin {\n  /** htmlloader */\n  htmlLoader?: (code: string) => string;\n  /** js */\n  jsExcludes?: Array<string | RegExp>;\n  /** js */\n  jsIgnores?: Array<string | RegExp>;\n  /** jsloader */\n  jsBeforeLoaders?: Array<ScriptObjectLoader>;\n  /** jsloader */\n  jsLoader?: (code: string, url: string, base: string) => string;\n  /** jsloader */\n  jsAfterLoaders?: Array<ScriptObjectLoader>;\n  /** css */\n  cssExcludes?: Array<string | RegExp>;\n  /** css */\n  cssIgnores?: Array<string | RegExp>;\n  /** cssloader */\n  cssBeforeLoaders?: Array<StyleObject>;\n  /** cssloader */\n  cssLoader?: (code: string, url: string, base: string) => string;\n  /** cssloader */\n  cssAfterLoaders?: Array<StyleObject>;\n  /**  window addEventListener  */\n  windowAddEventListenerHook?: eventListenerHook;\n  /**  window removeEventListener  */\n  windowRemoveEventListenerHook?: eventListenerHook;\n  /**  document addEventListener  */\n  documentAddEventListenerHook?: eventListenerHook;\n  /**  document removeEventListener  */\n  documentRemoveEventListenerHook?: eventListenerHook;\n  /**  bodyhead */\n  appendOrInsertElementHook?: <T extends Node>(element: T, iframeWindow: Window) => void;\n  /**  */\n  patchElementHook?: <T extends Node>(element: T, iframeWindow: Window) => void;\n  /**  window  */\n  windowPropertyOverride?: (iframeWindow: Window) => void;\n  /**  document  */\n  documentPropertyOverride?: (iframeWindow: Window) => void;\n}\n\ntype eventListenerHook = (\n  iframeWindow: Window,\n  type: string,\n  handler: EventListenerOrEventListenerObject,\n  options?: boolean | AddEventListenerOptions\n) => void;\n\nexport type loadErrorHandler = (url: string, e: Error) => any;\n\ntype baseOptions = {\n  /**  */\n  name: string;\n  /** url */\n  url: string;\n  /** html, url */\n  html?: string;\n  /**  */\n  replace?: (code: string) => string;\n  /** fetch */\n  fetch?: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n  /**  */\n  props?: { [key: string]: any };\n  /** iframe */\n  attrs?: { [key: string]: any };\n  /** iframe */\n  degradeAttrs?: { [key: string]: any };\n  /** fiber */\n  fiber?: boolean;\n  /** state */\n  alive?: boolean;\n  /** iframe */\n  degrade?: boolean;\n  /**  */\n  plugins?: Array<plugin>;\n  /**  */\n  beforeLoad?: lifecycle;\n  beforeMount?: lifecycle;\n  afterMount?: lifecycle;\n  beforeUnmount?: lifecycle;\n  afterUnmount?: lifecycle;\n  activated?: lifecycle;\n  deactivated?: lifecycle;\n  loadError?: loadErrorHandler;\n};\n\nexport type preOptions = Omit<baseOptions, \"url\"> & {\n  /**  */\n  exec?: boolean;\n  url?: string;\n};\n\nexport type startOptions = baseOptions & {\n  /**  */\n  el: HTMLElement | string;\n  /**\n   * \n   * falsehistory\n   * https://html.spec.whatwg.org/multipage/history.html#the-history-interface\n   */\n  sync?: boolean;\n  /**  */\n  prefix?: { [key: string]: string };\n  /** loading */\n  loading?: HTMLElement;\n};\n\ntype optionProperty = \"url\" | \"el\";\n\n/**\n *  preOptions  startOptions url  el \n */\nexport type cacheOptions = Omit<preOptions & startOptions, optionProperty> &\n  Partial<Pick<startOptions, optionProperty>>;\n\n/**\n * \n * wujie.__WUJIE true\n * window.__POWERED_BY_WUJIE__ false\n * iframeloading\n */\nif (window.__WUJIE && !window.__POWERED_BY_WUJIE__) {\n  stopMainAppRun();\n}\n\n// \nprocessAppForHrefJump();\n\n// webComponent\ndefineWujieWebComponent();\n\n// \nif (!wujieSupport) warn(WUJIE_TIPS_NOT_SUPPORTED);\n\n/**\n * \n */\nexport function setupApp(options: cacheOptions): void {\n  if (options.name) addSandboxCacheWithOptions(options.name, options);\n}\n\n/**\n * app\n */\nexport async function startApp(startOptions: startOptions): Promise<Function | void> {\n  const sandbox = getWujieById(startOptions.name);\n  const cacheOptions = getOptionsById(startOptions.name);\n  // \n  const options = mergeOptions(startOptions, cacheOptions);\n  const {\n    name,\n    url,\n    html,\n    replace,\n    fetch,\n    props,\n    attrs,\n    degradeAttrs,\n    fiber,\n    alive,\n    degrade,\n    sync,\n    prefix,\n    el,\n    loading,\n    plugins,\n    lifecycles,\n  } = options;\n  // \n  if (sandbox) {\n    sandbox.plugins = getPlugins(plugins);\n    sandbox.lifecycles = lifecycles;\n    const iframeWindow = sandbox.iframe.contentWindow;\n    if (sandbox.preload) {\n      await sandbox.preload;\n    }\n    if (alive) {\n      // \n      await sandbox.active({ url, sync, prefix, el, props, alive, fetch, replace });\n      // \n      if (!sandbox.execFlag) {\n        sandbox.lifecycles?.beforeLoad?.(sandbox.iframe.contentWindow);\n        const { getExternalScripts } = await importHTML({\n          url,\n          html,\n          opts: {\n            fetch: fetch || window.fetch,\n            plugins: sandbox.plugins,\n            loadError: sandbox.lifecycles.loadError,\n            fiber,\n          },\n        });\n        await sandbox.start(getExternalScripts);\n      }\n      sandbox.lifecycles?.activated?.(sandbox.iframe.contentWindow);\n      return () => sandbox.destroy();\n    } else if (isFunction(iframeWindow.__WUJIE_MOUNT)) {\n      /**\n       * webcomponentdisconnectedCallbacksandbox.unmount\n       * webcomponentstartAppunmount\n       */\n      await sandbox.unmount();\n      await sandbox.active({ url, sync, prefix, el, props, alive, fetch, replace });\n      // cssmount\n      sandbox.rebuildStyleSheets();\n      // \n      sandbox.lifecycles?.beforeMount?.(sandbox.iframe.contentWindow);\n      iframeWindow.__WUJIE_MOUNT();\n      sandbox.lifecycles?.afterMount?.(sandbox.iframe.contentWindow);\n      sandbox.mountFlag = true;\n      return () => sandbox.destroy();\n    } else {\n      // \n      await sandbox.destroy();\n    }\n  }\n\n  // loading\n  addLoading(el, loading);\n  const newSandbox = new WuJie({ name, url, attrs, degradeAttrs, fiber, degrade, plugins, lifecycles });\n  newSandbox.lifecycles?.beforeLoad?.(newSandbox.iframe.contentWindow);\n  const { template, getExternalScripts, getExternalStyleSheets } = await importHTML({\n    url,\n    html,\n    opts: {\n      fetch: fetch || window.fetch,\n      plugins: newSandbox.plugins,\n      loadError: newSandbox.lifecycles.loadError,\n      fiber,\n    },\n  });\n\n  const processedHtml = await processCssLoader(newSandbox, template, getExternalStyleSheets);\n  await newSandbox.active({ url, sync, prefix, template: processedHtml, el, props, alive, fetch, replace });\n  await newSandbox.start(getExternalScripts);\n  return () => newSandbox.destroy();\n}\n\n/**\n * APP\n */\nexport function preloadApp(preOptions: preOptions): void {\n  requestIdleCallback((): void | Promise<void> => {\n    /**\n     * \n     * urlidurl\n     */\n    if (getWujieById(preOptions.name) || isMatchSyncQueryById(preOptions.name)) return;\n    const cacheOptions = getOptionsById(preOptions.name);\n    // \n    const options = mergeOptions({ ...preOptions }, cacheOptions);\n    const {\n      name,\n      url,\n      html,\n      props,\n      alive,\n      replace,\n      fetch,\n      exec,\n      attrs,\n      degradeAttrs,\n      fiber,\n      degrade,\n      prefix,\n      plugins,\n      lifecycles,\n    } = options;\n\n    const sandbox = new WuJie({ name, url, attrs, degradeAttrs, fiber, degrade, plugins, lifecycles });\n    if (sandbox.preload) return sandbox.preload;\n    const runPreload = async () => {\n      sandbox.lifecycles?.beforeLoad?.(sandbox.iframe.contentWindow);\n      const { template, getExternalScripts, getExternalStyleSheets } = await importHTML({\n        url,\n        html,\n        opts: {\n          fetch: fetch || window.fetch,\n          plugins: sandbox.plugins,\n          loadError: sandbox.lifecycles.loadError,\n          fiber,\n        },\n      });\n      const processedHtml = await processCssLoader(sandbox, template, getExternalStyleSheets);\n      await sandbox.active({ url, props, prefix, alive, template: processedHtml, fetch, replace });\n      if (exec) {\n        await sandbox.start(getExternalScripts);\n      } else {\n        await getExternalScripts();\n      }\n    };\n    sandbox.preload = runPreload();\n  });\n}\n\n/**\n * APP\n */\nexport function destroyApp(id: string): void {\n  const sandbox = getWujieById(id);\n  if (sandbox) {\n    sandbox.destroy();\n  }\n}\n","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };","import { bus, preloadApp, startApp as rawStartApp, destroyApp, setupApp } from \"wujie\";\nimport { h, defineComponent } from \"vue\";\n\nconst wujieVueOptions = {\n  name: \"WujieVue\",\n  props: {\n    width: { type: String, default: \"\" },\n    height: { type: String, default: \"\" },\n    name: { type: String, default: \"\" },\n    loading: { type: HTMLElement, default: undefined },\n    url: { type: String, default: \"\" },\n    sync: { type: Boolean, default: undefined },\n    prefix: { type: Object, default: undefined },\n    alive: { type: Boolean, default: undefined },\n    props: { type: Object, default: undefined },\n    attrs: { type: Object, default: undefined },\n    replace: { type: Function, default: undefined },\n    fetch: { type: Function, default: undefined },\n    fiber: { type: Boolean, default: undefined },\n    degrade: { type: Boolean, default: undefined },\n    plugins: { type: Array, default: null },\n    beforeLoad: { type: Function, default: null },\n    beforeMount: { type: Function, default: null },\n    afterMount: { type: Function, default: null },\n    beforeUnmount: { type: Function, default: null },\n    afterUnmount: { type: Function, default: null },\n    activated: { type: Function, default: null },\n    deactivated: { type: Function, default: null },\n    loadError: { type: Function, default: null },\n    style: { type: Object, default: undefined },\n  },\n  data() {\n    return {\n      startAppQueue: Promise.resolve(),\n    };\n  },\n  mounted() {\n    if (this.name) {\n      if (window.__WUJIE_QUEUE) {\n        if (window.__WUJIE_QUEUE[this.name]) {\n          this.startAppQueue = window.__WUJIE_QUEUE[this.name];\n        } else {\n          window.__WUJIE_QUEUE[this.name] = this.startAppQueue;\n        }\n      } else {\n        window.__WUJIE_QUEUE = {\n          [this.name]: this.startAppQueue,\n        };\n      }\n    }\n    bus.$onAll(this.handleEmit);\n    this.execStartApp();\n    this.$watch(\n      () => this.name + this.url,\n      () => this.execStartApp()\n    );\n  },\n  methods: {\n    handleEmit(event, ...args) {\n      this.$emit(event, ...args);\n    },\n    async startApp() {\n      try {\n        await rawStartApp({\n          name: this.name,\n          url: this.url,\n          el: this.$refs.wujie,\n          loading: this.loading,\n          alive: this.alive,\n          fetch: this.fetch,\n          props: this.props,\n          attrs: this.attrs,\n          replace: this.replace,\n          sync: this.sync,\n          prefix: this.prefix,\n          fiber: this.fiber,\n          degrade: this.degrade,\n          plugins: this.plugins,\n          beforeLoad: this.beforeLoad,\n          beforeMount: this.beforeMount,\n          afterMount: this.afterMount,\n          beforeUnmount: this.beforeUnmount,\n          afterUnmount: this.afterUnmount,\n          activated: this.activated,\n          deactivated: this.deactivated,\n          loadError: this.loadError,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    execStartApp() {\n      this.startAppQueue = this.startAppQueue.then(this.startApp);\n      window.__WUJIE_QUEUE[this.name] = this.startAppQueue;\n    },\n    destroy() {\n      destroyApp(this.name);\n    },\n  },\n  beforeDestroy() {\n    bus.$offAll(this.handleEmit);\n  },\n  render() {\n    return h(\"div\", {\n      style: {\n        width: this.width,\n        height: this.height,\n        ...this.style,\n      },\n      ref: \"wujie\",\n    });\n  },\n};\n\nconst WujieVue = defineComponent(wujieVueOptions);\n\nWujieVue.setupApp = setupApp;\nWujieVue.preloadApp = preloadApp;\nWujieVue.bus = bus;\nWujieVue.destroyApp = destroyApp;\nWujieVue.install = function (app) {\n  app.component(\"WujieVue\", WujieVue);\n};\n\nexport default WujieVue;\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__154__","_typeof","_regeneratorRuntime","e","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","prop","toPropertyKey","toPrimitive","String","_defineProperty","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","_arrayLikeToArray","Array","_unsupportedIterableToArray","toString","from","test","_slicedToArray","isArray","_toConsumableArray","WUJIE_APP_ID","WUJIE_SCRIPT_ID","WUJIE_DATA_FLAG","CONTAINER_POSITION_DATA_FLAG","CONTAINER_OVERFLOW_DATA_FLAG","LOADING_DATA_FLAG","WUJIE_DATA_ATTACH_CSS_FLAG","WUJIE_ALL_EVENT","WUJIE_TIPS_RELOAD_DISABLED","WUJIE_TIPS_STOP_APP","WUJIE_TIPS_STOP_APP_DETAIL","WUJIE_TIPS_NO_SUBJECT","WUJIE_TIPS_SCRIPT_ERROR_REQUESTED","WUJIE_TIPS_CSS_ERROR_REQUESTED","WUJIE_TIPS_HTML_ERROR_REQUESTED","WUJIE_TIPS_REPEAT_RENDER","isFunction","wujieSupport","window","Proxy","CustomElementRegistry","naughtySafari","document","all","callableFnCacheMap","WeakMap","isCallable","fn","has","callable","set","boundedMap","isBoundedFunction","bounded","indexOf","fnRegexCheckCacheMap","isConstructable","hasPrototypeMethods","getOwnPropertyNames","constructable","fnString","setFnCacheMap","getTargetValue","target","boundValue","bind","getDegradeIframe","id","querySelector","concat","setAttrsToElement","element","attrs","setAttribute","appRouteParse","url","error","urlElement","anchorElementGenerator","appHostPath","protocol","host","appRoutePath","pathname","search","hash","startsWith","createElement","href","getAnchorElementQueryMap","anchorElement","queryString","URLSearchParams","entries","reduce","isMatchSyncQueryById","queryMap","location","includes","fixElementCtrSrcOrHref","iframeWindow","elementCtr","attr","rawElementSetAttribute","Element","targetValue","getAbsolutePath","baseURI","rawAnchorElementHrefDescriptor","getOwnPropertyDescriptor","_get","_set","getCurUrl","proxyLocation","base","URL","_unused","requestIdleCallback","cb","setTimeout","getContainer","container","warn","msg","data","_console","console","_console2","getInlineCode","match","start","end","lastIndexOf","substring","defaultGetPublicPath","entry","_URL","origin","paths","split","join","compose","fnList","code","_len","args","_key","newCode","nextTick","execHooks","plugins","hookName","_len2","_key2","map","plugin","filter","hook","isScriptElement","_element$tagName","tagName","toUpperCase","count","setTagToScript","tag","scriptTag","getTagFromScript","getAttribute","mergeOptions","options","cacheOptions","el","html","exec","replace","fetch","props","sync","prefix","loading","degradeAttrs","fiber","alive","degrade","lifecycles","beforeLoad","beforeMount","afterMount","beforeUnmount","afterUnmount","activated","deactivated","loadError","eventTrigger","eventName","detail","event","CustomEvent","createEvent","initCustomEvent","dispatchEvent","stopMainAppRun","ALL_SCRIPT_REGEX","SCRIPT_TAG_REGEX","SCRIPT_SRC_REGEX","SCRIPT_TYPE_REGEX","SCRIPT_ENTRY_REGEX","SCRIPT_ASYNC_REGEX","DEFER_ASYNC_REGEX","SCRIPT_NO_MODULE_REGEX","SCRIPT_MODULE_REGEX","LINK_TAG_REGEX","LINK_PRELOAD_OR_PREFETCH_REGEX","LINK_HREF_REGEX","LINK_AS_FONT","STYLE_TAG_REGEX","STYLE_TYPE_REGEX","STYLE_HREF_REGEX","HTML_COMMENT_REGEX","LINK_IGNORE_REGEX","STYLE_IGNORE_REGEX","SCRIPT_IGNORE_REGEX","CROSS_ORIGIN_REGEX","hasProtocol","getEntirePath","path","parseTagAttributes","TagOuterHTML","matches","attributeMatches","attributesString","attributesPattern","attributesObject","attributeName","attributeValue","genLinkReplaceSymbol","linkHref","getInlineStyleReplaceSymbol","index","genIgnoreAssetReplaceSymbol","genModuleScriptReplaceSymbol","scriptSrc","moduleSupport","getCssLoader","_ref","src","cssLoader","getPresetLoaders","loaderType","res","loaders","preLoaders","curLoaders","getEffectLoaders","isMatchUrl","effectLoaders","some","loader","defaultPlugin","baseUrl","_m","pre","post","cssBeforeLoaders","content","getPlugins","styleCache","scriptCache","embedHTMLCache","defaultFetch","defaultGetTemplate","tpl","processCssLoader","_x","_x2","_x3","_processCssLoader","_callee","sandbox","template","getExternalStyleSheets","curUrl","composeCssLoader","processedCssList","embedHTML","_context","_ref2","ignore","contentPromise","getEmbedHTML","_x4","_x5","_getEmbedHTML","_callee2","styleResultList","_context2","styleResult","fetchAssets","cache","cssFlag","response","status","text","_getExternalStyleSheets","styles","_getExternalScripts","scripts","script","defer","reject","_objectSpread","importHTML","params","_opts$fetch","_opts$fiber","opts","htmlLoader","jsExcludes","cssExcludes","jsIgnores","cssIgnores","getPublicPath","getHtmlParseResult","assetPublicPath","_processTpl","postProcessTemplate","styleHref","styleIgnore","newHref","scriptIgnore","isModuleScript","isCrossOriginScript","crossOriginType","moduleScriptIgnore","matchedScriptTypeMatch","matchedScriptEntry","matchedScriptSrcMatch","matchedScriptSrc","SyntaxError","isAsyncScript","isDeferScript","crossorigin","crossoriginType","genScriptReplaceSymbol","every","line","trim","tplResult","processTpl","getExternalScripts","style","_classCallCheck","_defineProperties","_createClass","_getPrototypeOf","_setPrototypeOf","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_wrapNativeSuper","Map","Wrapper","idToSandboxCacheMap","_window$__WUJIE_INJEC","__WUJIE_INJECT","idToSandboxMap","cacheMap","__POWERED_BY_WUJIE__","__WUJIE","inject","getWujieById","_idToSandboxCacheMap$","wujie","getOptionsById","_idToSandboxCacheMap$2","documentProxyProperties","appDocumentAddEventListenerEvents","appDocumentOnEvents","mainDocumentAddEventListenerEvents","mainAndAppAddEventListenerEvents","appWindowAddEventListenerEvents","appWindowOnEvent","relativeElementTagAttrMap","IMG","A","SOURCE","windowProxyProperties","windowRegWhiteList","rawElementAppendChild","HTMLElement","appendChild","rawElementRemoveChild","removeChild","rawElementContains","contains","rawHeadInsertBefore","HTMLHeadElement","insertBefore","rawBodyInsertBefore","HTMLBodyElement","rawInsertAdjacentElement","HTMLStyleElement","insertAdjacentElement","rawAddEventListener","Node","addEventListener","rawRemoveEventListener","removeEventListener","rawWindowAddEventListener","rawWindowRemoveEventListener","rawAppendChild","rawDocumentQuerySelector","__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__","Document","manualInvokeElementEvent","elementGetter","patchedEvent","defineProperties","srcElement","handleStylesheetElementPatch","stylesheetElement","innerHTML","_patcher","clearTimeout","_getPatchStyleElement2","getPatchStyleElements","sheet","hostStyleSheetElement","fontStyleSheetElement","shadowRoot","head","dynamicScriptExecStack","rewriteAppendOrInsertChild","newChild","refChild","_this5","rawDOMAppendOrInsertBefore","wujieId","styleSheetElements","iframe","patchElementEffect","contentWindow","iframeDocument","contentDocument","rel","endsWith","_res","rawAttrs","outerHTML","comment","createComment","_res2","_stylesheetElement$sh","_hasPatchStyle","innerHTMLDesc","innerTextDesc","textContentDesc","RawInsertRule","insertRule","patchSheetInsertRule","_this","innerText","_this2","textContent","_this3","node","_this4","nodeType","TEXT_NODE","ownerDocument","createTextNode","position","nodeName","rule","patchStylesheetElement","_ref3","_type","crossOrigin","execScript","scriptResult","insertScriptToIframe","onload","_sandbox$execQueue","execQueue","execQueueLength","shift","_sandbox$execQueue2","_comment","_res3","findScriptElementFromIframe","rawElement","wujieTag","targetScript","__WUJIE_RAW_DOCUMENT_HEAD__","rewriteContains","other","patchEventListener","listenerMap","_cacheListeners","listener","listeners","typeListeners","splice","_ref4","_ref5","patchRenderEffect","render","body","child","_findScriptElementFro2","cssSelectorMap","renderElementToContainer","selectorOrElement","clearChild","initRenderIframeAndContainer","parent","createIframeContainer","open","write","close","processCssLoaderForTemplate","_processCssLoaderForTemplate","cssAfterLoaders","contentList","styleElement","firstChild","renderTemplateToHtml","execFlag","sourceAttributes","DOMParser","parseFromString","documentElement","attributes","headElement","bodyElement","cloneNode","parentNode","replaceChild","replaceHeadAndBody","ElementIterator","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextElement","currentNode","relativeAttr","nextNode","_head","_body","renderTemplateToShadowRoot","_renderTemplateToShadowRoot","processedHtml","shade","renderTemplateToIframe","_x6","_x7","_x8","_renderTemplateToIframe","_callee3","renderDocument","_context3","addLoading","containerStyles","getComputedStyle","overflow","setProperty","loadingContainer","removeLoading","positionFlag","overflowFlag","removeProperty","removeAttribute","rootStyleSheets","rootCssRules","fontCssRules","rootStyleReg","_rootStyleSheets$i$cs","_rootStyleSheets$i","cssRules","j","cssRuleText","cssText","CSSRule","FONT_FACE_RULE","rootStyleSheetElement","syncUrlToWindow","_iframeWindow$__WUJIE","winUrlElement","validShortPath","shortPath","longPath","encodeURIComponent","newQuery","history","replaceState","syncUrlToIframe","_iframeWindow$locatio","_iframeWindow$__WUJIE2","idUrl","_syncUrl$match","syncUrl","getSyncUrl","mainHostPath","clearInactiveAppUrl","hrefFlag","activeFlag","decodeURIComponent","patchIframeVariable","__WUJIE_PUBLIC_PATH__","$wujie","provide","__WUJIE_RAW_WINDOW__","updateBase","baseElement","recoverEventListeners","rootElement","elementEventCacheMap","elementListenerList","handler","recoverDocumentListeners","oldRootElement","newRootElement","patchEventTimeStamp","targetWindow","Event","timeStamp","stopIframeLoading","useObjectURL","oldDoc","loopDeadline","Date","now","loop","newDoc","err","deadline","_loop","disableSandboxEmptyPageURL","execCommand","_hasPatch","callback","scriptElement","nextScriptElement","jsLoader","getJsLoader","descriptor","execNextScript","afterExecScript","isOutlineScript","onerror","renderIframeReplaceApp","disabledMarkKey","disabled","localStorage","getItem","createObjectURL","prevURL","blob","Blob","setItem","getSandboxEmptyPageURL","iframeGenerator","iframeReady","implementation","createHTMLDocument","newDocumentElement","importNode","__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__","querySelectorAll","__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__","__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__","iframeUrlElement","appUrlElement","initBase","rawHistoryPushState","pushState","rawHistoryReplaceState","title","mainUrl","ignoreFlag","patchIframeHistory","__WUJIE_EVENTLISTENER__","Set","add","patchIframeEvents","find","findIndex","ele","recordEventListeners","syncIframeUrlToWindow","processWindowProperty","message","reg","patchWindowEffect","handlerCallbackMap","handlerTypeMap","typeList","elementOnEvents","documentOnEvent","firstElementChild","val","ownerProperties","shadowProperties","shadowMethods","documentProperties","documentMethods","documentEvents","propKey","proxyDocument","patchDocumentEffect","rawGetRootNode","getRootNode","rawInsertRule","rawRemoveChild","rootNode","_node$parentNode","toLowerCase","isConnected","patchNodeEffect","HTMLImageElement","HTMLAnchorElement","HTMLSourceElement","HTMLLinkElement","HTMLScriptElement","HTMLMediaElement","patchRelativeUrlEffect","initIframeDom","locationHrefSet","_iframe$contentWindow","hrefElement","iframeBody","parentElement","pushUrlToWindow","appEventObjMap","EventBus","$clear","eventObj","cbs","$on","on","$off","allCbs","_cbs","_i","_l","_allCbs","_appEventObjMap$get","Wujie","bus","wujieCache","_appRouteParse","_localGenerator","documentURI","getElementsByTagName","getElementById","modifyLocalProperties","_sandbox$document","locationKeys","constantKey","reload","localGenerator","_proxyGenerator","proxyWindow","proxy","checkProxyFunction","_fakeDocument","_iframe$contentWindow2","rawCreateElement","rawCreateTextNode","_createElement","_ctx","ctx","_ctx$propKey","rawPropMap","_ctx$propKey2","_getTargetValue","activeElement","_fakeLocation","_args$","ownKeys","_target","proxyGenerator","_proxyDocument","_proxyLocation","_active","iframeFetch","_initRenderIframeAndC","_iframeBody","input","init","onunload","unmount","contentElement","classList","patchCssRules","_requestIdleCallback","_start","scriptResultList","beforeScriptResultList","afterScriptResultList","syncScriptResultList","asyncScriptResultList","deferScriptResultList","domContentLoadedTrigger","domLoadedTrigger","beforeScriptResult","mount","_this3$execQueue$shif","afterScriptResult","_this3$execQueue$shif2","__WUJIE_UNMOUNT","_this3$execQueue$shif3","_this$execQueue$shift","_this$lifecycles","_this$lifecycles$befo","_this$lifecycles2","_this$lifecycles2$aft","_this$lifecycles3","_this$lifecycles3$act","mountFlag","__WUJIE_MOUNT","_unmount","_this$lifecycles4","_this$lifecycles4$dea","_this$lifecycles5","_this$lifecycles5$bef","_this$lifecycles6","_this$lifecycles6$aft","_this$bus","_destroy","_callee4","_this$iframe$parentNo","_iframeWindow","_context4","styleSheetElement","hasAttribute","startApp","_startApp","startOptions","_newSandbox$lifecycle","_newSandbox$lifecycle2","_sandbox$lifecycles3","_sandbox$lifecycles3$","_sandbox$lifecycles2","_sandbox$lifecycles2$","_yield$importHTML2","_sandbox$lifecycles4","_sandbox$lifecycles4$","_sandbox$lifecycles5","_sandbox$lifecycles5$","newSandbox","_yield$importHTML3","preload","active","destroy","rebuildStyleSheets","WuJie","destroyApp","customElements","WujieApp","_HTMLElement","ReferenceError","_inherits","attachShadow","mode","defineWujieWebComponent","_toPrimitive","_toPropertyKey","wujieVueOptions","width","default","height","startAppQueue","mounted","__WUJIE_QUEUE","$onAll","handleEmit","execStartApp","$watch","methods","$emit","rawStartApp","$refs","t0","log","beforeDestroy","$offAll","ref","WujieVue","defineComponent","setupApp","addSandboxCacheWithOptions","preloadApp","preOptions","runPreload","_sandbox$lifecycles","_sandbox$lifecycles$b","_yield$importHTML","install","app","component"],"sourceRoot":""}